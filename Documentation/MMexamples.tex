\ProvidesFile{MMexamples.tex}[v1.0.0]
\appendixStart{\textitcorr{Examples}}%
The examples that are part of the \mplusm{} set of source files are provided to support
the development of custom applications.
There are example clients, services, adapters as well as examples of the more specialized
Input, Output and Filter services.\\

All the example applications respond to a `HUP' signal and will exit gracefully when one
is sent to them.
\secondaryStart{Example~Services}
The set of example services include a pair of simple services
[\examplesNameR{Services}{mpmEchoService} and
\examplesNameR{Services}{mpmRandomNumberService}], a service with client context
[\examplesNameR{Services}{mpmRunningSumService}] as well as an input service
[\examplesNameR{Services}{mpmRandomBurstService}], two output services
[\examplesNameR{Services}{mpmAbsorberService} and
\examplesNameR{Services}{mpmRecordIntegersService}] and a filter service
[\examplesNameR{Services}{mpmTruncateFloatService}].\\

Note that services normally have no direct interface.
That is, they are `faceless' applications and perform their operations without user
interaction.
\tertiaryStart{\examplesNameP{Services}{mpmAbsorberService}}
The \examplesNameX{Services}{mpmAbsorberService} application is an Output
service, accepting (and ignoring) any input data.
The application responds to the standard Output service requests and can be used as a
standalone data sink, without the need for a client connection.\\

The \requestsNameR{\inputOutput{}}{InputOutput}{configure} request has no arguments and
does nothing.\\

The \requestsNameR{\inputOutput{}}{InputOutput}{restartStreams} request stops and then
starts the input stream.\\

The \requestsNameR{\inputOutput{}}{InputOutput}{startStreams} request initiates listening
on the input stream.\\

The \requestsNameR{\inputOutput{}}{InputOutput}{stopStreams} request terminates listening
on the input stream.\\

Note that the application will exit if the
\serviceNameR[Registry~Service]{RegistryService} is not running.\\

The application has two optional arguments -- an alternative endpoint name to be used and
the port number to be used, if a non--default port is desired.\\

The application also has two optional parameters:
\begin{itemize}
\item \textbf{-r:} report the service metrics when the application exits
\item \textbf{-t:} specifies the tag to be used as part of the service name
\end{itemize}
The tag is added to the standard name of the service, so that more than one copy of the
service can execute -- an \mplusm{} installation can support multiple copies of each
\inputOutput{} service, but the \utilityNameR[Channel~Manager]{ChannelManager}
application cannot display them without a distinguishing `tag'.\\
If the tag is not specified, the standard name of the service will be used.
As well as the service name, the input stream name is modified if a tag is specified and
the default endpoint is being used.\\

If the application is running from a terminal, the following commands are available:
\begin{itemize}
\item \textbf{b:} start the input stream. 
\item \textbf{c:} configure the service; this has no effect, as the service has no
configurable parameters. 
\item \textbf{e:} stop the input stream. 
\item \textbf{q:} quit the application. 
\item \textbf{r:} restart the input stream.
\item \textbf{u:} reset the configuration so that it will be reprocessed when the input
stream is restarted. 
\item \textbf{?:} display a list of the available commands.
\end{itemize}
\tertiaryEnd{\examplesNameE{Services}{mpmAbsorberService}}
\tertiaryStart{\examplesNameP{Services}{mpmEchoService}}
The \examplesNameX{Services}{mpmEchoService} application responds to
\requestsNameR{Miscellaneous}{Miscellaneous}{echo} requests from the
\examplesNameR{Clients}{mpmEchoClient} application; it simply returns any arguments
sent with the request.\\

Note that the application will exit if the
\serviceNameR[Registry~Service]{RegistryService} is not running.\\

The application has two optional arguments -- an alternative endpoint name to be used and
the port number to be used, if a non--default port is desired; the matching client
application does not directly use the endpoint name to establish a connection to the
service.\\

The application also has two optional parameters:
\begin{itemize}
\item \textbf{-r:} report the service metrics when the application exits
\item \textbf{-t:} specifies the tag to be used as part of the service name
\end{itemize}
The tag is added to the standard name of the service, so that more than one copy of the
service can execute.
\tertiaryEnd{\examplesNameE{Services}{mpmEchoService}}
\tertiaryStart{\examplesNameP{Services}{mpmRandomBurstService}}
The \examplesNameX{Services}{mpmRandomBurstService} application is an Input service,
generating a stream of random floating--point values, with a given `burst size' -- the
number of values sent in a group, and a `burst perdiod' -- the number of seconds between
groups.
The application responds to the standard Input service requests and can be used as a
standalone data generator, without the need for a client connection.\\

The \requestsNameR{\inputOutput{}}{InputOutput}{configure} request has two arguments -- a
floating--point value for the `burst period' and an integer value for the `burst size'.
These values will be applied when the output stream is started or restarted.\\

The \requestsNameR{\inputOutput{}}{InputOutput}{restartStreams} request stops and then
starts the output stream.\\

The \requestsNameR{\inputOutput{}}{InputOutput}{startStreams} request starts a random
number generator for the output stream, using the configured `burst period' and
`burst size'.
Once started, the random number generator will send groups of random floating--point
values via the output \yarp{} network connection.\\

The \requestsNameR{\inputOutput{}}{InputOutput}{stopStreams} request stops the random
number generator, which stops the output \yarp{} network connection.\\ 

Note that the application will exit if the
\serviceNameR[Registry~Service]{RegistryService} is not running.\\

The application has two optional arguments -- an alternative endpoint name to be used and
the port number to be used, if a non--default port is desired.\\

The application also has four optional parameters:
\begin{itemize}
\item \textbf{-p:} specifies the burst period, in seconds, to be used 
\item \textbf{-r:} report the service metrics when the application exits
\item \textbf{-s:} specifies the burst size to be used
\item \textbf{-t:} specifies the tag to be used as part of the service name
\end{itemize}
The tag is added to the standard name of the service, so that more than one copy of the
service can execute -- an \mplusm{} installation can support multiple copies of each
\inputOutput{} service, but the \utilityNameR[Channel~Manager]{ChannelManager}
application cannot display them without a distinguishing `tag'.
If the tag is not specified, the standard name of the service will be used.
As well as the service name, the output stream name is modified if a tag is specified and
the default endpoint is being used.\\

The other parameters provide the initial burst period and size; if not specified, a burst
period of 1 second and burst size of 1 will be used.
Note that the burst period and size can also be set via commands, if the application is
running from a terminal.\\

If the application is running from a terminal, the following commands are available:
\begin{itemize}
\item \textbf{b:} start the output stream, sending bursts of data of the specified size
and period. 
\item \textbf{c:} configure the service by providing the burst size and period. 
\item \textbf{e:} stop the output stream. 
\item \textbf{q:} quit the application. 
\item \textbf{r:} restart the output stream. 
\item \textbf{u:} reset the configuration so that it will be reprocessed when the output
stream is restarted. 
\item \textbf{?:} display a list of the available commands.
\end{itemize}
\tertiaryEnd{\examplesNameE{Services}{mpmRandomBurstService}}
\tertiaryStart{\examplesNameP{Services}{mpmRandomNumberService}}
The \examplesNameX{Services}{mpmRandomNumberService} application responds to
\requestsNameR{Examples}{Examples}{random} requests from the
\examplesNameR{Clients}{mpmRandomNumberClient} application; it returns a group of random
numbers to the client.\\

Note that the application will exit if the
\serviceNameR[Registry~Service]{RegistryService} is not running.\\

The application has two optional arguments -- an alternative endpoint name to be used and
the port number to be used, if a non--default port is desired; the matching client
application does not directly use the endpoint name to establish a connection to the
service.\\

The application also has two optional parameters:
\begin{itemize}
\item \textbf{-r:} report the service metrics when the application exits
\item \textbf{-t:} specifies the tag to be used as part of the service name
\end{itemize}
The tag is added to the standard name of the service, so that more than one copy of the
service can execute.\\

The \requestsNameD{Examples}{Examples}{random} request has an argument of the
count of floating--point random numbers to be returned as a response to the request.
\requestsNameE{Examples}{Examples}{random}%
\tertiaryEnd{\examplesNameE{Services}{mpmRandomNumberService}}
\tertiaryStart{\examplesNameP{Services}{mpmRecordIntegersService}}
The \examplesNameX{Services}{mpmRecordIntegersService} application is an Output
service, recording a stream of integer values to an external file.
The application responds to the standard Output service requests and can be used as a
standalone data generator, without the need for a client connection.\\

The \requestsNameR{\inputOutput{}}{InputOutput}{configure} request has a single argument,
the file--system path to use for the output file.
The path will be used when the input stream is started or restarted.\\

The \requestsNameR{\inputOutput{}}{InputOutput}{restartStreams} request stops and then
starts the input stream.\\

The \requestsNameR{\inputOutput{}}{InputOutput}{startStreams} request opens a file to be
used for output, using the configured output file path.\\

The \requestsNameR{\inputOutput{}}{InputOutput}{stopStreams} request closes the output
file that is being used.\\

Note that the application will exit if the
\serviceNameR[Registry~Service]{RegistryService} is not running.\\

The application has two optional arguments -- an alternative endpoint name to be used and
the port number to be used, if a non--default port is desired.\\

The application also has three optional parameters:
\begin{itemize}
\item \textbf{-p:} specifies the output file path to be used
\item \textbf{-r:} report the service metrics when the application exits
\item \textbf{-t:} specifies the tag to be used as part of the service name
\end{itemize}
The tag is added to the standard name of the service, so that more than one copy of the
service can execute -- an \mplusm{} installation can support multiple copies of each
\inputOutput{} service, but the \utilityNameR[Channel~Manager]{ChannelManager}
application cannot display them without a distinguishing `tag'.
If the tag is not specified, the standard name of the service will be used.
As well as the service name, the input stream name is modified if a tag is specified and
the default endpoint is being used.\\

The output file path parameter provides the initial output file path; if not specified, a
random path in the temporary directory will be used.
For Microsoft Windows, the temporary directory being used is ``\textbackslash{}tmp''
while, for Macintosh OS X, it will be ``/tmp''.
Note that the output file path can also be set via commands, if the application is
running from a terminal.\\

If the application is running from a terminal, the following commands are available:
\begin{itemize}
\item \textbf{b:} start the input stream, using the specified output file path to record
the input data. 
\item \textbf{c:} configure the service by providing the output file path to be used. 
\item \textbf{e:} stop the input stream, which will close the output file. 
\item \textbf{q:} quit the application. 
\item \textbf{r:} restart the input stream, which will cause the current output file to be
closed and a new output file to be opened.
\item \textbf{u:} reset the configuration so that it will be reprocessed when the input
stream is restarted. 
\item \textbf{?:} display a list of the available commands.
\end{itemize}
\tertiaryEnd{\examplesNameE{Services}{mpmRecordIntegersService}}
\tertiaryStart{\examplesNameP{Services}{mpmRunningSumService}}
The \examplesNameX{Services}{mpmRunningSumService} application responds to
requests from the \examplesNameR{Clients}{mpmRunningSumClient} application or\\
\examplesNameR{Adapters}{mpmRunningSumAdapter} or
\examplesNameR{Adapters}{mpmRunningSumAltAdapter} adapters; it returns the running sum
associated with the requesting application or adapter.\\

Note that the application will exit if the
\serviceNameR[Registry~Service]{RegistryService} is not running.\\

The application has two optional arguments -- an alternative endpoint name to be used and
the port number to be used, if a non--default port is desired; the matching client
application does not directly use the endpoint name to establish a connection to the
service.\\

The application also has two optional parameter:
\begin{itemize}
\item \textbf{-r:} report the service metrics when the application exits
\item \textbf{-t:} specifies the tag to be used as part of the service name
\end{itemize}
The tag is added to the standard name of the service, so that more than one copy of the
service can execute.\\

The \requestsNameD{Examples}{Examples}{addtosum} request updates the running sum
corresponding to the requesting application or adapter and returns the resulting value.
Note that an \requestsNameX{Examples}{Examples}{addtosum} request implicitly starts the
calculation.\\
\requestsNameE{Examples}{Examples}{addtosum}%

The \requestsNameD{Examples}{Examples}{resetsum} request clears the running sum
corresponding to the requesting application or adapter.\\
\requestsNameE{Examples}{Examples}{resetsum}%

The \requestsNameD{Examples}{Examples}{startsum} request starts the running sum
calculation for the requesting application or adapter.
Note that a \requestsNameX{Examples}{Examples}{startsum} request implicitly resets the
calculation, if it has already been started.\\
\requestsNameE{Examples}{Examples}{startsum}%

The \requestsNameD{Examples}{Examples}{stopsum} request stops the running sum
calculation for the requesting application or adapter.
\requestsNameE{Examples}{Examples}{stopsum}%
\tertiaryEnd{\examplesNameE{Services}{mpmRunningSumService}}
\tertiaryStart{\examplesNameP{Services}{mpmTruncateFloatService}}
The \examplesNameX{Services}{mpmTruncateFloatService} application is a Filter
service, converting a stream of floating--point values into a stream of integers.
The application responds to the standard Filter service requests and can be used as a
standalone data generator, without the need for a client connection.\\

The \requestsNameR{\inputOutput{}}{InputOutput}{configure} request has no arguments and
does nothing.\\

The \requestsNameR{\inputOutput{}}{InputOutput}{restartStreams} request stops and then
starts the input and output streams.\\

The \requestsNameR{\inputOutput{}}{InputOutput}{startStreams} request initiates listening
on the input stream; the output stream is only written to when input is seen, so nothing
special is done with it.\\

The \requestsNameR{\inputOutput{}}{InputOutput}{stopStreams} request terminates listening
on the input stream, which will cause sending on the output stream to cease as well.\\

Note that the application will exit if the
\serviceNameR[Registry~Service]{RegistryService} is not running.\\

The application has two optional arguments -- an alternative endpoint name to be used and
the port number to be used, if a non--default port is desired.\\

The application also has one optional parameters:
\begin{itemize}
\item \textbf{-t:} specifies the tag to be used as part of the service name.
\end{itemize}
The tag is added to the standard name of the service, so that more than one copy of the
service can execute -- an \mplusm{} installation can support multiple copies of each
\inputOutput{} service, but the \utilityNameR[Channel~Manager]{ChannelManager}
application cannot display them without a distinguishing `tag'.\\
If the tag is not specified, the standard name of the service will be used.
As well as the service name, the input and output stream names are modified if a tag is
specified and the default endpoint is being used.\\

If the application is running from a terminal, the following commands are available:
\begin{itemize}
\item \textbf{b:} start the input and output streams. 
\item \textbf{c:} configure the service; this has no effect, as the service has no
configurable parameters. 
\item \textbf{e:} stop the input and output streams. 
\item \textbf{q:} quit the application. 
\item \textbf{r:} restart the input and output streams.
\item \textbf{u:} reset the configuration so that it will be reprocessed when the input
and output streams are restarted. 
\item \textbf{?:} display a list of the available commands.
\end{itemize}
\tertiaryEnd{\examplesNameE{Services}{mpmTruncateFloatService}}
\secondaryEnd{}
\secondaryStart{Example~Clients}
The example client applications provided use simple terminal--based interfaces to
generate requests for their matching service applications.
\tertiaryStart{\examplesNameP{Clients}{mpmEchoClient}}
The \examplesNameX{Clients}{mpmEchoClient} application reads input from a terminal and
sends it to the \examplesNameR{Services}{mpmEchoService} application using an
\requestsNameR{Miscellaneous}{Miscellaneous}{echo} request; it exits when an empty line is
entered.\\

Note that the application will also exit if the
\serviceNameR[Registry~Service]{RegistryService} or the
\examplesNameR{Services}{mpmEchoService} application are not running or if the application
is not running from an interactive terminal.
\tertiaryEnd{\examplesNameE{Clients}{mpmEchoClient}}
\tertiaryStart{\examplesNameP{Clients}{mpmRandomNumberClient}}
The \examplesNameX{Clients}{mpmRandomNumberClient} application reads the count of
random numbers desired from a terminal and sends a
\requestsNameR{Examples}{Examples}{random} request to the
\examplesNameR{Services}{mpmRandomNumberService} application; it exits when a zero is
entered for the count of random numbers desired.
Note that the application will also exit if the
\serviceNameR[Registry~Service]{RegistryService} or the
\examplesNameR{Services}{mpmRandomNumberService} application are not running or if the
application is not running from an interactive terminal.
\tertiaryEnd{\examplesNameE{Clients}{mpmRandomNumberClient}}
\tertiaryStart{\examplesNameP{Clients}{mpmRunningSumClient}}
The \examplesNameX{Clients}{mpmRunningSumClient} application reads commands from a
terminal and sends corresponding requests to the
\examplesNameR{Services}{mpmRunningSumService} application.\\

The commands are:
\begin{itemize}
\item \textbf{+:} read a number from the terminal and send it to the service via an
\requestsNameR{Examples}{Examples}{addtosum} request, to update the running sum for this
client.
\item \textbf{q:} send a \requestsNameR{Examples}{Examples}{stopsum} request to the
service so that it will stop calculating the running sum for this client and then exit the
application.
\item \textbf{r:} send a \requestsNameR{Examples}{Examples}{resetsum} request to the
service so that it will reset the running sum for this client.
\item \textbf{s:} send a \requestsNameR{Examples}{Examples}{startsum} request to the
service so that it will start calculating the running sum for this client.
\item \textbf{?:} display a list of the available commands.
\end{itemize}
Note that the application will also exit if the
\serviceNameR[Registry~Service]{RegistryService} or the
\examplesNameR{Services}{mpmRunningSumService} application are not running or if the
application is not running from an interactive terminal.
\tertiaryEnd{\examplesNameE{Clients}{mpmRunningSumClient}}
\secondaryEnd{}
\secondaryStart{Example~Adapters}
Adapters are applications that use a client object to connect to an \mplusm{} service,
routing input from one or more input \yarp{} network connection via the client object to
the service and returning results from the client to one or more output \yarp{} network
connections.\\

The example adapters demonstrate using a single input \yarp{} network connection
[\examplesNameR{Adapters}{mpmRandomNumberAdapter} and
\examplesNameR{Adapters}{mpmRunningSumAltAdapter}] or multiple input \yarp{} network
connections [\examplesNameR{Adapters}{mpmRunningSumAdapter}].\\

Note that adapters normally have no direct interface.
That is, they are `faceless' applications and perform their operations without user
interaction.
\tertiaryStart{\examplesNameP{Adapters}{mpmRandomNumberAdapter}}
The \examplesNameX{Adapters}{mpmRandomNumberAdapter} application reads the count of
random numbers desired from an input \yarp{} network connection and sends a
\requestsNameR{Examples}{Examples}{random} request to the
\examplesNameR{Services}{mpmRandomNumberService} application.
The random numbers returned from the service are sent out an output \yarp{} network
connection.
Note that the application will also exit if the
\serviceNameR[Registry~Service]{RegistryService} or the
\examplesNameR{Services}{mpmRandomNumberService} application are not running.
\tertiaryEnd{\examplesNameE{Adapters}{mpmRandomNumberAdapter}}
\tertiaryStart{\examplesNameP{Adapters}{mpmRunningSumAdapter}}

The \examplesNameX{Adapters}{mpmRunningSumAdapter} application reads  values from an input
`data' \yarp{} network connection and commands from an input `control' \yarp{} network
connection and sends corresponding requests to the
\examplesNameR{Services}{mpmRunningSumService} application.\\

If a numeric value is read from the `data' input \yarp{} network connection, it is sent to
the service via an \requestsNameR{Examples}{Examples}{addtosum} request, to update the
running sum for this adapter.
If a string is read from the `control' input \yarp{} network connection, it is considered
to be one of the following commands:
\begin{itemize}
\item \textbf{q:} exit the application.
\item \textbf{r:} send a \requestsNameR{Examples}{Examples}{resetsum} request to the
service so that it will reset the running sum for this adapter.
\item \textbf{s:} send a \requestsNameR{Examples}{Examples}{startsum} request to the
service so that it will start calculating the running sum for this adapter.
\item \textbf{x:} send a \requestsNameR{Examples}{Examples}{stopsum} request to the
service so that it will stop calculating the running sum for this adapter.
\end{itemize}
The running sums returned from the service are sent out an output \yarp{} network
connection.\\

Note that the application will also exit if the
\serviceNameR[Registry~Service]{RegistryService} or the
\examplesNameR{Services}{mpmRunningSumService} application are not running.
\tertiaryEnd{\examplesNameE{Adapters}{mpmRunningSumAdapter}}
\tertiaryStart{\examplesNameP{Adapters}{mpmRunningSumAltAdapter}}
The \examplesNameX{Adapters}{mpmRunningSumAltAdapter} application reads  values and
commands from an input \yarp{} network connection and sends corresponding requests to the
\examplesNameR{Services}{mpmRunningSumService} application.\\

If a numeric value is read from the input \yarp{} network connection, it is sent to the
service via an \requestsNameR{Examples}{Examples}{addtosum} request, to update the running
sum for this adapter.
If a string is read from the input \yarp{} network connection, is is considered to be one
of the following commands:
\begin{itemize}
\item \textbf{q:} exit the application.
\item \textbf{r:} send a \requestsNameR{Examples}{Examples}{resetsum} request to the
service so that it will reset the running sum for this adapter.
\item \textbf{s:} send a \requestsNameR{Examples}{Examples}{startsum} request to the
service so that it will start calculating the running sum for this adapter.
\item \textbf{x:} send a \requestsNameR{Examples}{Examples}{stopsum} request to the
service so that it will stop calculating the running sum for this adapter.
\end{itemize}
The running sums returned from the service are sent out an output \yarp{} network
connection.\\

Note that the application will also exit if the
\serviceNameR[Registry~Service]{RegistryService} or the
\examplesNameR{Services}{mpmRunningSumService} application are not running.
\tertiaryEnd{\examplesNameE{Adapters}{mpmRunningSumAltAdapter}}
\secondaryEnd{}
\appendixEnd{}
