\ProvidesFile{KV2messageFormat.tex}[v1.0.0]
\primaryStart{The~Message~Format}
Each time that the Kinect V2 controller reports that there is information available,
the \asCode{KinectV2InputService} packages it into a single message
\openSq\asCode{Bottle}\closeSq, containing the following:
\begin{itemize}
\item A list of bodies
\end{itemize}

For each valid body, a dictionary \openSq\asCode{Property}\closeSq{} is added to the list
of bodies, with the following properties:
\begin{itemize}
\item\textbf{lefthand} \longDash{} the state of the left hand (`\asCode{closed}',
`\asCode{open}', `\asCode{lasso}' or `\asCode{unknown}' (which should never appear))
\item\exSp\textbf{righthand} \longDash{} the state of the right hand
\item\exSp\textbf{lefthandconfidence} \longDash{} the confidence in the state of the left
hand (`\asCode{low}', `\asCode{high}' or `\asCode{unknown}' (which should never appear))
\item\exSp\textbf{righthandconfidence} \longDash{} the confidence in the state of the
right hand
\item\exSp\textbf{joints} \longDash{} a list of joints
\end{itemize}

The joints list consists of the following joints:\\
\textbraceleft{} \emph{head}, \emph{neck}, \emph{spineshoulder}, \emph{spinemid},
\emph{spinebase}, \emph{shoulderright}, \emph{shoulderleft}, \emph{hipright},
\emph{hipleft}, \emph{elbowright}, \emph{wristright},\\
\emph{handright}, \emph{handtipright}, \emph{thumbright}, \emph{elbowleft},
\emph{wristleft}, \emph{handleft}, \emph{handtipleft}, \emph{thumbleft}, \emph{kneeright},
\emph{ankleright},\\
\emph{footright}, \emph{kneeleft}, \emph{ankleleft}, \emph{footleft} \textbraceright\\

Not all joints will be present in each message.\\

For each ``tracked'' joint, a dictionary is added to the joints list, with the following
properties:
\begin{itemize}
\item\textbf{tag} \longDash{} the name of the bone, as listed above
\item\exSp\textbf{position} \longDash{} the three\longDash{}dimensional coordinates
\openSq{}X, Y, Z\closeSq{} of the position of the joint, as a list of three
floating\longDash{}point numbers; the units are most likely metres from the Kinect V2
controller
\item\exSp\textbf{orientation} \longDash{} the four\longDash{}dimensional coordinates
\openSq{}x, y, z, w\closeSq{} of the orientation of the joint, as a list of four
floating\longDash{}point numbers
\end{itemize}
\primaryEnd
\primaryStart{The~Message~Format: \KVtwoBI}
Each time that the Kinect V2 controller reports that there is information
available, the \asCode{KinectV2BlobInputService} packages it into a single message
\openSq\asCode{Bottle}\closeSq, containing a single binary blob, with the following
format:
\begin{itemize}
\item A line containing the number of subjects to follow
\item\exSp{}A list of subjects, consisting of
\begin{itemize}
\item A line containing the name of the subject and the number of segments
\item\exSp{}A list of segments, with each segment one per line, with its name, the
three\longDash{}dimensional coordinates \openSq{}X, Y, Z\closeSq{} of the `translation'
of the segment, multiplied by the translation scale and the rotation quaternion
\openSq{}x, y, z, w\closeSq{} for the segment
\end{itemize}
\end{itemize}
\primaryEnd{}
