\ProvidesFile{MMutilities.tex}[v1.0.0]
\primaryStart{Utilities}
The utility programs that are provided with \mplusm{} provide access to the processes that
are running in the \mplusm{} installation.
Although command--line \yarp{} commands can also be used to manage the network
connections, it is recommended that the more specialized \mplusm{} tools be used, to avoid
inconsistencies.
\secondaryStart[GUITools]{GUI~Tools}
Currently there is one GUI--based tool, \utilityNameR[Channel~Manager]{ChannelManager},
which provides a view of the state of connections within an \mplusm{} installation, as
well as managing non--\mplusm{} \yarp{} network connections.
\tertiaryStart{\utilityNameP[Channel~Manager]{ChannelManager}}
\objDiagram{MMcmDiagram.ps}{cmDiagram}{Channel~Manager structure}

The \utilityNameX[Channel~Manager]{ChannelManager} application displays a single window
view of the connections within a \yarp{} network, with features designed to make
management of an \mplusm{} installation easier.
Simple \yarp{} network ports are shown as rectangles with a title consisting of the IP
address and port number of the port, and the \yarp{} name for the port as the body of the
rectangle, prefixed with `In' for input--only ports, `Out' for output--only ports and
`I/O' for general ports.\\

\mplusm{} services are shown as rectangles with a title consisting of the name provided by
the service, with the primary \yarp{} network connection as the first row in the body of
the rectangle, prefixed with `S' to indicate that it is a service connection.
Secondary \yarp{} network connections appear as rows below the primary connection,
prefixed with `In' for input--only connections and `Out' for output--only connections.
\mplusm{} \inputOutput{} services do not have a visual appearance that is distinct from
other \mplusm{} services -- the connections that are allowed, however, are more
restricted.
Both \mplusm{} services and clients can have multiple secondary \yarp{} network ports.\\

\mplusm{} simple clients are shown as rectangles with a title consisting of the IP address
and port number of their connection to a service, with a row containing the \yarp{}
network connection prefixed with `C'.
\mplusm{} adapters are similar to \mplusm{} simple clients, except that they have
additional rows above the client--service \yarp{} network connection for the secondary
\yarp{} network connections, with prefixes of `In' for input--only connections and `Out'
for output--only connections.\\

Connections between ports are shown as lines with one of three thicknesses and one of
three colours.
The thinnest lines represent simple \yarp{} network connections, which have no explicit
behaviours.
The middle thickness lines represent connections between \inputOutput{} services; these
connections have specific behaviours.
The thickest lines represent connections between clients and services, which are not
modifiable by this tool.
TCP/IP connections, which are the default, are shown in teal, UDP connections are shown in
purple and other connections are shown in orange.
Note that the tool can only create TCP/IP or UDP connections.\\

To create a connection between two ports, click on the source port with the `Option' /
`Alt' key held down and either drag the mouse to the destination port or click on the
destination port.
If the `Shift' is held down at the same time as the `Option' / `Alt' key, the new
network connection will be UDP rather than TCP/IP.
While an `add' operation is active, the source port will be overlaid with a small filled
yellow circle.
To clear a pending `add' operation, either click on the source port a second time or click
somewhere other than a port.
Note that it is not possible to add a connection from an input--only port, from a client
port to a non--service port, or from an output--only port of an \inputOutput{} service to
an input--only port of another \inputOutput{} service if the ports do not have matching
protocols.
\objScaledDiagram{images/beforeAdd.eps}{beforeAdd}{Before adding a connection}{0.8}

\objScaledDiagram{images/clickAdd.eps}{clickAdd}{Clicking to add a connection}{0.8}

\objScaledDiagram{images/afterAdd.eps}{afterAdd}{After adding a connection}{0.8}
\clearpage
\objScaledDiagram{images/dragAdd2.eps}{dragAdd}{Adding a connection via drag}{0.8}

To remove a connection between two ports, click on the source port with the `Command' key
held down and then click on the destination port.
While a `remove' operation is active, the source port will be overlaid with a small
hollow yellow circle.
To clear a pending `remove' operation, either click on the source port a second time or
click on a port that is not connected to the source port or somewhere other than a port.
Note that is is not possible to remove a connection from a client to a service.
\objScaledDiagram{images/beforeRemove.eps}{beforeRemove}{Removing a connection}{0.8}

Clicking on a rectangular object with no modifier key held down allows the user to drag
the object around in the window.
Note that connections cannot be selected by clicking on the line that represents them.
\clearpage
Doing a right--mouse click in the background, displays a popup menu with three choices:
\begin{itemize}
\item \textbf{Repaint} force a repaint, in case there's a `glitch' of the display; this
can also be triggered via a \textbf{Cmd--R} command
\item \textbf{Invert background} invert the background; this can also be triggered via a
\textbf{Cmd--I} command
\item \textbf{White background} switch between a black~/~white background and a gradient;
this can also be triggered via a \textbf{Cmd--B} command
\end{itemize}
\objScaledDiagram{images/backgroundMenu.eps}{backgroundMenu}{Background menu}{0.5}
Doing a right--mouse click on the title of a rectangle that does not represent a service,
displays a popup menu with two choices:
\begin{itemize}
\item \textbf{Display entity information} display information about the entity
\item \textbf{Display detailed entity information} display information about the entity
\end{itemize}
\objScaledDiagram{images/entityMenu.eps}{entityMenu}{Entity menu}{0.5}
\clearpage
Doing a right--mouse click on the title of a rectangle representing a service, displays a
popup menu with four choices, which depend on whether the `Display service metrics' menu
item is enabled:
\begin{itemize}
\item \textbf{Display service information} display information about the service
\item \textbf{Display detailed service information} display information about the service,
including the (non--default) requests for the service
\item \textbf{Enable service metrics collection} enable the `Display service metrics' menu
item
\item \textbf{Display service metrics} -- this item is disabled
\end{itemize}
\objScaledDiagram{images/serviceMenuMetricsDisabled.eps}{serviceMenuMetricsDisabled}%
{Service menu with Metrics disabled}{0.5}
or
\begin{itemize}
\item \textbf{Display service information} -- as described above
\item \textbf{Display detailed service information} -- as described above
\item \textbf{Disable service metrics collection} disable the `Display service metrics'
menu item
\item \textbf{Display service metrics} display information about the activity on each port
of the service -- the number of bytes and number of messages sent to and from the port;
the category `auxiliary' represents the anonymous ports used by the service during its
operation
\end{itemize}
if the `Display service metrics' item for the service is enabled.
\objScaledDiagram{images/serviceMenuMetricsEnabled.eps}{serviceMenuMetricsEnabled}%
{Service menu with Metrics enabled}{0.5}
\clearpage
Doing a right--mouse click on a regular port displays a popup menu with two choices:
\begin{itemize}
\item \textbf{Display port information} display information about the port
\item \textbf{Display detailed port information} display information about the port
\end{itemize}
\objScaledDiagram{images/portMenu.eps}{portMenu}{Regular port menu}{0.5}
Doing a right--mouse click on the primary channel of a service displays a popup menu with
three choices, which depend on whether the `Display service metrics' menu item is enabled:
\begin{itemize}
\item \textbf{Display channel information} display information about the channel
\item \textbf{Display detailed channel information} generate output in tab--delimited form
\item \textbf{Display channel metrics} -- this item is disabled
\end{itemize}
\objScaledDiagram{images/serviceChannelMenuMetricsDisabled.eps}%
{serviceChannelMenuMetricsDisabled}{Primary channel menu with Metrics disabled}{0.5}
or
\begin{itemize}
\item \textbf{Display channel information} -- as described above
\item \textbf{Display detailed channel information} -- as described above
\item \textbf{Display channel metrics} display information about the activity on the
channel -- the number of bytes and number of messages sent to and from the channel
\end{itemize}
\objScaledDiagram{images/serviceChannelMenuMetricsEnabled.eps}%
{serviceChannelMenuMetricsEnabled}{Primary channel menu with Metrics enabled}{0.5}
if the `Display service metrics' item for the service is enabled.
\clearpage
Doing a right--mouse click on a non--primary channel of a service displays a popup menu
with five choices, which depend on whether the `Display service metrics' menu item is
enabled:
\begin{itemize}
\item \textbf{Display channel information} display information about the channel,
including the protocol for the channel
\item \textbf{Display detailed channel information} display information about the channel,
including the protocol for the channel and a description of the protocol
\item \textbf{Display channel metrics} -- this item is disabled
\item \textbf{Add simple monitor} -- this is currently not implemented, so it is
disabled
\item \textbf{Add scrolling monitor} -- this is currently not implemented, so it is
disabled
\end{itemize}
\objScaledDiagram{images/regularChannelMenuMetricsDisabled.eps}%
{regularChannelMenuMetricsDisabled}{Non--primary channel menu with Metrics disabled}{0.5}
or
\begin{itemize}
\item \textbf{Display channel information} -- as described above
\item \textbf{Display detailed channel information} -- as described above
\item \textbf{Display channel metrics} -- as described above
\item \textbf{Add simple monitor} -- as described above
\item \textbf{Add scrolling monitor} -- as described above
\end{itemize}
\objScaledDiagram{images/regularChannelMenuMetricsEnabled.eps}%
{regularChannelMenuMetricsEnabled}{Non--primary channel menu with Metrics enabled}{0.5}
if the `Display service metrics' item for the service is enabled.\\

The positions of the objects within the window are stored in the file `settings.txt'
within the `ChannelManager' directory inside the user--specific application data
directory.
On Microsoft Windows, this will likely be ``\textbackslash{}Documents~and~Settings%
\textbackslash{}username\textbackslash{}Application~Data'' while, for Macintosh OS X, it
will likely be ``\textasciitilde/Library''.\\
\tertiaryEnd{\utilityNameE[Channel~Manager]{ChannelManager}}
\secondaryEnd{}
\newpage
\secondaryStart[CommandLineUtilities]{Command--Line~Utilities}
\mplusm{} includes a number of command--line tools that provide some of the functionality
of the GUI--based tool, \utilityNameR[Channel~Manager]{ChannelManager}.
As well, the native \yarp{} command--line tools to create and remove connections can be
used with \mplusm{}, but it is very easy to create a non--functional installation if care
is not taken.
\tertiaryStart{\utilityNameP{mpmClientList}}
The program \utilityNameX{mpmClientList} displays the clients for services that have
\yarp{} network connections with persistent state.
A service that has persistent state for its connections retains information from each
request for the following request.
An example service with persistent state is
\examplesNameR{Services}{mpmRunningSumService}, where the information that is kept is the
running sum for the connected client.
The program takes an optional argument for the \yarp{} network port of the service; if no
argument is provided, all services are checked for connections with persistent state.
It has two command--line options:
\begin{itemize}
\item \textbf{--j} generate JSON--formatted output
\item \textbf{--t} generate output in tab--delimited form
\end{itemize}
If neither option is present, the output is written as simple text.\\

The output specifies the \yarp{} network port of a service with persistent state and the
\yarp{} network ports that are connected to it.\\

For example, the default output could be:
\outputBegin{}
Service:\ /\serviceName/examples/runningSum\\
\settowidth{\utilLen}{Cli}%
Clients:\\
\hspace*{\utilLen}/\clientName/examples/runningsum\textunderscore{}4896162
\outputEnd{}
or, if JSON--formatted output is requested:
\outputBegin{}
\openSq{} \textbraceleft{} "Service":\ "/\serviceName/examples/runningSum", "Client":\ \\
"/\clientName/examples/runningsum\textunderscore{}4896162" \textbraceright{} \closeSq
\outputEnd{}
or, if tab--delimited output is requested, with tabs shown as
`\texttt{\boldmath{$\vdash$}}':
\outputBegin{}
/\serviceName/examples/runningSum\pseudotab{}%
/\clientName/examples/runningsum\textunderscore{}4896162
\outputEnd{}
Note that, if no clients are found, the JSON--formatted output would be:
\outputBegin{}
\sqPair
\outputEnd{}
while the default output would be:
\outputBegin{}
No client connections found.
\outputEnd{}
and the tab--delimited output would be empty.
If no matching service is found, the default output would be:
\outputBegin{}
No services found.
\outputEnd{}
and the JSON--formatted and tab--delimited outputs would be empty.
\tertiaryEnd{\utilityNameE{mpmClientList}}
\tertiaryStart{\utilityNameP{mpmFindServices}}
The program \utilityNameX{mpmFindServices} displays the primary channels belonging to
services that match a criteria provided on the command--line or interactively.\\

It has three command--line options:
\begin{itemize}
\item \textbf{--c} use the next command--line argument as the matching criteria
\item \textbf{--j} generate JSON--formatted output
\item \textbf{--t} generate output in tab--delimited form
\end{itemize}
If neither format is specified, the output is written as simple text.\\

If no criteria is provided on the command--line, the program enters a loop, asking for an
operation to do:
\begin{itemize}
\item \textbf{?:} display a list of the available commands.
\item \textbf{f:} request the matching criteria and process it.
\item \textbf{q:} quit the application. 
\end{itemize}
An example execution of the program, with the command--line option
\asCode{-c 'tag!blurt'} provided, would have the following output if default formatting is
used:
\outputBegin{}
/\dollarService, /\serviceName/filter/truncatefloat, /blort
\outputEnd{}
or, if JSON--formatted output is requested:
\outputBegin{}
\openSq{} "/\dollarService", "/\serviceName/filter/truncatefloat", "/blort" \closeSq
\outputEnd{}
of, if tab--delimited output is requested, with tabs shown as
`\texttt{\boldmath{$\vdash$}}':
\outputBegin{}
/\dollarService\pseudotab/\serviceName/filter/truncatefloat\pseudotab/blort
\outputEnd{}
If no criteria is provided on the command--line, and default formatting is used, with
user input shown in bold, an example execution of the program could be:
\outputBegin{}
Operation:\ \openSq{}?\ f q\closeSq{}?\ \textbf{f}\\
Match criteria:\ \textbf{tag!blurt}\\
/\dollarService, /\serviceName/filter/truncatefloat, /blort\\
Operation:\ \openSq{}?\ f q\closeSq{}?\ \textbf{f}\\
Match criteria:\ \textbf{tag:blurt}\\
/\serviceName/input/randomburst/blurt\\
Operation:\ \openSq{}?\ f q\closeSq{}?\ \textbf{q}
\outputEnd{}
or, it JSON--formatted output is requested:
\outputBegin{}
Operation:\ \openSq{}?\ f q\closeSq{}?\ \textbf{f}\\
Match criteria:\ \textbf{tag!blurt}\\
\openSq{} "/\dollarService", "/\serviceName/filter/truncatefloat", "/blort" \closeSq{}\\
Operation:\ \openSq{}?\ f q\closeSq{}?\ \textbf{f}\\
Match criteria:\ \textbf{tag:blurt}\\
\openSq{} "/\serviceName/input/randomburst/blurt" \closeSq{}\\
Operation:\ \openSq{}?\ f q\closeSq{}?\ \textbf{q}
\outputEnd{}
or, if tab--delimited output is requested, with tabs shown as
`\texttt{\boldmath{$\vdash$}}':
\outputBegin{}
Operation:\ \openSq{}?\ f q\closeSq{}?\ \textbf{f}\\
Match criteria:\ \textbf{tag!blurt}\\
/\dollarService\pseudotab/\serviceName/filter/truncatefloat\pseudotab/blort\\
Operation:\ \openSq{}?\ f q\closeSq{}?\ \textbf{f}\\
Match criteria:\ \textbf{tag:blurt}\\
/\serviceName/input/randomburst/blurt\\
Operation:\ \openSq{}?\ f q\closeSq{}?\ \textbf{q}
\outputEnd{}
\tertiaryEnd{\utilityNameE{mpmFindServices}}
\newpage
\tertiaryStart{\utilityNameP{mpmPortLister}}
The program \utilityNameX{mpmPortLister} displays the active \yarp{} ports and \mplusm{}
entities.
For each \yarp{} port, its role in the \mplusm{} installation is shown as well as any
incoming and outgoing \yarp{} network connections.
The primary port for each active service is identified, as well as the primary port for
each adapter.
It has two command--line options:
\begin{itemize}
\item \textbf{--j} generate JSON--formatted output
\item \textbf{--t} generate output in tab--delimited form
\end{itemize}
If neither option is present, the output is written as simple text.\\

The output specifies the all the active \yarp{} network ports along with their input and
output \yarp{} network ports; regular \yarp{} network ports are tagged as `Standard',
while \mplusm{} adapter ports are tagged as `Adapter', \mplusm{} client ports are tagged
as `Client' and \mplusm{} service ports are tagged as `Service' or `Service registry'.\\

`Standard' ports report their IP address and network port while `Adapter' ports report
the \mplusm{} port of their client application, `Client' ports report their attached
`Adapter' ports, if any are present and `Service' ports report the name of the \mplusm{}
service that they provide.
The connections indicate their direction relative to the \yarp{} network port that is
being listed, along with the \yarp{} network port that is being connected to and the mode
of the connection, such as TCP or UDP.\\

For example, the default output could be:
\outputBegin{}
Ports:\\
\settowidth{\utilLen}{Por}%
/\dollarService:\ Service registry port for 'Registry'.\\
\hspace*{\utilLen}No active connections.\\
/\dollarService/status:\ Standard port at 10.0.1.2:10008.\\
\hspace*{\utilLen}Output to /reader via UDP.\\
/reader:\ Standard port at 10.0.1.2:10003.\\
\hspace*{\utilLen}Input from /writer2 via TCP.\\
\hspace*{\utilLen}Input from /writer via TCP.\\
\hspace*{\utilLen}Input from /\dollarService/status via UDP.\\
/writer:\ Standard port at 10.0.1.2:10002.\\
\hspace*{\utilLen}Output to /reader via TCP.\\
/writer2:\ Standard port at 10.0.1.2:10004.\\
\hspace*{\utilLen}Output to /reader via TCP.
\outputEnd{}
or, if JSON--formatted output is requested:
\outputBegin{}
\openSq{} \textbraceleft{} "PortName":\ "/\dollarService", "PortClass":\
"Service~registry~port~for~'Registry'", "Inputs":\ \sqPair, "Outputs":\
\sqPair{} \textbraceright{}, \textbraceleft{} "PortName":\ "/\dollarService/status",
"PortClass":\ \\
"Standard~port~at~10.0.1.2:10008", "Inputs":\ \sqPair, "Outputs":\ \openSq{}
\textbraceleft{} "Port":\ \\
"/reader", "Mode":\ "UDP" \textbraceright{} \closeSq{} \textbraceright{},
\textbraceleft{} "PortName":\ "/reader", "PortClass":\ \\
"Standard~port~at~10.0.1.2:10003", "Inputs":\ \openSq{} \textbraceleft{} "Port":\
"/writer2", "Mode":\ \\
"TCP" \textbraceright{}, \textbraceleft{} "Port":\ "/writer", "Mode":\ "TCP"
\textbraceright, \textbraceleft{} "Port":\ "/\dollarService/status",\\
"Mode":\ "UDP" \textbraceright{} \closeSq, "Outputs":\ \sqPair{} \textbraceright,
\textbraceleft{} "PortName":\ "/writer", "PortClass":\ \\
"Standard~port~at~10.0.1.2:10002", "Inputs":\ \sqPair, "Outputs":\ \openSq{}
\textbraceleft{} "Port":\ \\
"/reader", "Mode":\ "TCP" \textbraceright{} \closeSq{} \textbraceright{},
\textbraceleft{} "PortName":\ "/writer2", "PortClass":\ \\
"Standard~port~at~10.0.1.2:10004", "Inputs":\ \sqPair, "Outputs":\ \openSq{}
\textbraceleft{} "Port":\ \\
"/reader", "Mode":\ "TCP" \textbraceright{} \closeSq{} \textbraceright{} \closeSq
\outputEnd{}
or, if tab--delimited output is requested, with tabs shown as
`\texttt{\boldmath{$\vdash$}}':
\outputBegin{}
/\dollarService\pseudotab{}Service~registry~port~for~'Registry'\\		
/\dollarService/status\pseudotab{}Standard~port~at~10.0.1.2:10008\pseudotab/%
reader~UDP\\
/reader\pseudotab{}Standard~port~at~10.0.1.2:10003\pseudotab/writer2~TCP,
/writer~TCP,\\
\hspace*{2em}/\dollarService/status~UDP\\
/writer\pseudotab{}Standard~port~at~10.0.1.2:10002\pseudotab/reader~TCP\\
/writer2\pseudotab{}Standard~port~at~10.0.1.2:10004\pseudotab/reader~TCP
\outputEnd{}
Note that, if no ports are found, the JSON--formatted output would be:
\outputBegin{}
\sqPair
\outputEnd{}
while the default output would be:
\outputBegin{}
Ports:\\
\settowidth{\utilLen}{Por}%
\hspace*{\utilLen}No ports found.
\outputEnd{}
and the tab--delimited output would be empty.
\tertiaryEnd{\utilityNameE{mpmPortLister}}
\tertiaryStart{\utilityNameP{mpmRecordAsJSONService}}
The \utilityNameX{mpmRecordIntegersService} application is an Output
service, recording a stream of \yarp{} values to an external file.
The application responds to the standard Output service requests and can be used as a
standalone data generator, without the need for a client connection.\\

The \requestsNameR{\inputOutput{}}{InputOutput}{configure} request has a single argument,
the file--system path to use for the output file.
The path will be used when the input stream is started or restarted.\\

The \requestsNameR{\inputOutput{}}{InputOutput}{restartStreams} request stops and then
starts the input stream.\\

The \requestsNameR{\inputOutput{}}{InputOutput}{startStreams} request opens a file to be
used for output, using the configured output file path.\\

The \requestsNameR{\inputOutput{}}{InputOutput}{stopStreams} request closes the output
file that is being used.\\

Note that the application will exit if the
\serviceNameR[Registry~Service]{RegistryService} is not running.\\

The application has two optional arguments -- an alternative endpoint name to be used and
the port number to be used, if a non--default port is desired.\\

The application also has three optional parameters:
\begin{itemize}
\item \textbf{-p:} specifies the output file path to be used
\item \textbf{-r:} report the service metrics when the application exits
\item \textbf{-t:} specifies the tag to be used as part of the service name
\end{itemize}
The tag is added to the standard name of the service, so that more than one copy of the
service can execute -- an \mplusm{} installation can support multiple copies of each
\inputOutput{} service, but the \utilityNameR[Channel~Manager]{ChannelManager}
application cannot display them without a distinguishing `tag'.
If the tag is not specified, the standard name of the service will be used.
As well as the service name, the input stream name is modified if a tag is specified and
the default endpoint is being used.\\

The output file path parameter provides the initial output file path; if not specified, a
random path in the temporary directory will be used.
For Microsoft Windows, the temporary directory being used is ``\textbackslash{}tmp''
while, for Macintosh OS X, it will be ``/tmp''.
Note that the output file path can also be set via commands, if the application is
running from a terminal.\\

If the application is running from a terminal, the following commands are available:
\begin{itemize}
\item \textbf{?:} display a list of the available commands.
\item \textbf{b:} start the input stream, using the specified output file path to record
the input data. 
\item \textbf{c:} configure the service by providing the output file path to be used. 
\item \textbf{e:} stop the input stream, which will close the output file. 
\item \textbf{q:} quit the application. 
\item \textbf{r:} restart the input stream, which will cause the current output file to be
closed and a new output file to be opened.
\item \textbf{u:} reset the configuration so that it will be reprocessed when the input
stream is restarted. 
\end{itemize}
\tertiaryEnd{\utilityNameE{mpmRecordAsJSONService}}
\tertiaryStart{\utilityNameP{mpmRequestInfo}}
The program \utilityNameX{mpmRequestInfo} displays information on requests for one or more
active services in the \mplusm{} installation.
It lists each request, along with the \yarp{} network port for the service that handles
the request and details about the request.
The program takes two optional arguments for the \yarp{} network port of the service and
the request to get information on; if the request is not specified, all requests for the
given service are shown and, if no port is specified, all requests for all services are
displayed.
It has two command--line options:
\begin{itemize}
\item \textbf{--j} generate JSON--formatted output
\item \textbf{--t} generate output in tab--delimited form
\end{itemize}
If neither option is present, the output is written as simple text.\\

The output consists of the \yarp{} network port that is used by the service, the name of
the request, its version number, a description of the request, including its expected
input and expected output, as well as alternate names for the request and the format of
its inputs and outputs.\\

The input and output formats have a symbolic representation, which is currently used for
descriptive purposes and not actually validated by the services.\\

An `i' represents an integer value, a `d' represents a floating--point (`double') value,
an `n' represents a numeric value (either an integer or a floating--point number), an `s'
represents a string and a `.' represents an arbitrary value.\\

Values can be grouped in lists by being preceded by a `(' and followed by a `)';
concatenation of values indicates sequential appearance of the values.
That is, `sis' indicates a sequence consisting of a string, and integer and another
string.\\

A `:' indicates a key / value pair and a dictionary is indicated by a leading `[' and a
trailing `]'.\\

`?' after an item indicates that the item is optional, `*' indicates that the preceding
item may appear zero or more times and `+' indicates that the preceding item may appear
one or more times.\\

For example, the default output when both the service and the request are specified could
be:
\outputBegin{}
\begin{tabular}{l@{\ }p{12.8cm}}
Service Port:\ & /\dollarService\\
Request:\ & register\\
Version:\ & 1.0\\
Details:\ & Register the service and its requests\\
 & Input:\ the channel used by the service\\
 & Output:\ OK or FAILED, with a description of the problem\\
 & encountered\\
Keywords:\ & register add\\
Inputs:\ & s\\
Outputs:\ & s\\
\end{tabular}
\outputEnd{}
or, if JSON--formatted output is requested:
\outputBegin{}
\openSq{} \textbraceleft{} "Port":\ "/\dollarService", "Request":\ "register",
"Version":\ "1.0", "Details":\ \\
"Register the service and its requests\textbackslash{}nInput:\ the channel used by the\\
service\textbackslash{}nOutput:\ OK or FAILED, with a description of the problem\\
encountered", "Keywords":\ \openSq{} "register", "add" \closeSq, "Inputs":\ "s",
"Outputs":\ \\
"s" \textbraceright{} \closeSq
\outputEnd{}
or, if tab--delimited output is requested, with tabs shown as
`\texttt{\boldmath{$\vdash$}}':
\outputBegin{}
/\dollarService\pseudotab{}register\pseudotab{}1.0\pseudotab{}Register the service and its
requests\textbackslash{}nInput:\ the\\
channel used by the service\textbackslash{}nOutput:\ OK or FAILED, with a description of
the\\
problem encountered\pseudotab{}register add\pseudotab{}s\pseudotab{}s
\outputEnd{}
For the default output, multiple entries will be separated by a blank line; for
tab--delimited output each entry is on a line by itself and for JSON--formatted output,
the entries are objects within an array.
Note that, if no matching request is found, the JSON--formatted output would be:
\outputBegin{}
\sqPair
\outputEnd{}
\newpage
while the default output would be:
\outputBegin{}
No matching request found.
\outputEnd{}
and the tab--delimited output would be empty.
If no matching service is found, the default output would be:
\outputBegin{}
No services found.
\outputEnd{}
and the JSON--formatted and tab--delimited outputs would be empty.
\tertiaryEnd{\utilityNameE{mpmRequestInfo}}
\tertiaryStart{\utilityNameP{mpmServiceLister}}
The program \utilityNameX{mpmServiceLister} displays the active services in the \mplusm{}
installation.
It lists each service, along with the service description and requests, as well as the
path to the executable for the service and the \yarp{} network ports that the service
provides.
It has two command--line options:
\begin{itemize}
\item \textbf{--j} generate JSON--formatted output
\item \textbf{--t} generate output in tab--delimited form
\end{itemize}
If neither option is present, the output is written as simple text.\\

The output consists of the \yarp{} network port for the service, the `canonical' name of
the service, the kind of service (`Filter', `Input', `Output', `Normal' or `Registry'), a
short description of the service, a short description of the requests supported by the
service, the path to the executable for the service and any secondary input or output
\yarp{} network ports attached to the service.\\

Note that the description of requests supported by the service does not include the
\secondaryRef{BasicRequests}{`basic'} requests handled by all services or, in the case of
\inputOutput{} services, the \secondaryRef{InputOutputRequests}{`input~/~output'}
requests.\\

For each secondary input or output \yarp{} network port, the protocol supported by the
port is shown.
Note that secondary port protocols have no specific format -- they are simple strings that
must match in order for a connection to be established with the port.
By convention, protocol strings can have formats similar to the input and output formats
for requests, but there is no requirement that the protocol strings have any particular
structure.\\

If a protocol is not specified for a secondary input port, then it will accept any data;
if no protocol is specified for a secondary output port, then its output data has no
particular structure and can only be connected to a \yarp{} network port that has no
protocol.
\newpage
For example, the default output could be:
\outputBegin{}
\begin{tabular}{l@{\ }p{12.8cm}}
Services:\ & \\
\\
Service port:\ & /\dollarService\\
Service name:\ & Registry\\
Service kind:\ & Registry\\
Description:\ & The Registry service\\
Requests:\ & associate - associate a channel with another channel\\
 & disassociate - remove all associations for a channel\\
 & getAssociates - return the associations of a channel\\
 & match - return the channels for services matching the\\
 & criteria provided\\
 & ping - update the last-pinged information for a channel\\
 & or record the information for a service on the given\\
 & channel\\
 & register - record the information for a service on the\\
 & given channel\\
 & unregister - remove the information for a service on the\\
 & given channel\\
Path:\ & \textellipsis/mpmRegistryService\\
Secondary outputs:\ & /\dollarService/status\textbraceleft{}protocol=s%
\textbraceright\\
\\
Service port:\ & /\serviceName/input/randomburst\\
Service name:\ & RandomBurst\\
Service kind:\ & Input\\
Description:\ & The random burst input service\\
Requests:\ & \\
Path:\ & \textellipsis/mpmRandomBurstService\\
Secondary outputs:\ & /\serviceName/input/randomburst/output\textbraceleft{}protocol=d+%
\textbraceright\\
\\
Service port:\ & /\serviceName/output/recordintegers\\
Service name:\ & RecordIntegers\\
Service kind:\ & Output\\
Description:\ & The record integers output service\\
Requests:\ & \\
Path:\ & \textellipsis/mpmRecordIntegersService\\
Secondary inputs:\ & /\serviceName/output/recordintegers/input\textbraceleft{}protocol=i+%
\textbraceright\\
\\
Service port:\ & /shorten\\
Service name:\ & TruncateFloat\\
Service kind:\ & Filter\\
Description:\ & The truncate float service\\
Requests:\ & \\
Path:\ & \textellipsis/mpmTruncateFloatService\\
Secondary inputs:\ & /shorten/input\textbraceleft{}protocol=d+%
\textbraceright\\
Secondary outputs:\ & /shorten/output\textbraceleft{}protocol=i+%
\textbraceright
\end{tabular}
\outputEnd{}
\newpage
or, if JSON--formatted output is requested:
\outputBegin{}
\openSq{} \textbraceleft{} "ServicePort":\ "/\dollarService", "ServiceName":\
"Registry", "ServiceKind":\ \\
"Registry", "Description":\ "The Registry service", "Requests":\ \\
"associate - associate a channel with another channel\textbackslash{}ndisassociate - 
remove\\
all associations for a channel\textbackslash{}ngetAssociates - return the associations of
a\\
channel\textbackslash{}nmatch - return the channels for services matching the criteria\\
provided\textbackslash{}nping - update the last-pinged information for a channel or
record\\
the information for a service on the given channel\textbackslash{}nregister - record the\\
information for a service on the given channel\textbackslash{}nunregister - remove the\\
information for a service on the given channel", "Path":\ \\
"\textellipsis/mpmRegistryService", "SecondaryInputs":\ \sqPair, "SecondaryOutputs":\
\openSq{} \textbraceleft\\
"Name":\ "/\dollarService/status", "Protocol":\ "s" \textbraceright{} \closeSq{}
\textbraceright, \textbraceleft{} "ServicePort":\ \\
"/\serviceName/input/randomburst", "ServiceName":\ "RandomBurst", "ServiceKind":\ \\
"Input", "Description":\ "The random burst input service", "Requests":\ \\
"", "Path":\ "\textellipsis/mpmRandomBurstService", "SecondaryInputs":\ \sqPair,\\
"SecondaryOutputs":\ \openSq{} \textbraceleft{} "Name":\ 
"/\serviceName/input/randomburst/output",\\
"Protocol":\ "d+" \textbraceright{} \closeSq{} \textbraceright, \textbraceleft{}
"ServicePort":\ "/\serviceName/output/recordintegers",\\
"ServiceName":\ "RecordIntegers", "ServiceKind":\ "Output", "Description":\ \\
"The record integers output service", "Requests":\ "", "Path":\ \\
"\textellipsis/mpmRecordIntegersService", "SecondaryInputs":\ \openSq{} \textbraceleft{}
"Name":\ \\
"/\serviceName/output/recordintegers/input", "Protocol":\ "i+" \textbraceright{} %
\closeSq,\\
"SecondaryOutputs":\ \sqPair{} \textbraceright, \textbraceleft{} "ServicePort":\ 
"/shorten", "ServiceName":\ \\
"TruncateFloat", "ServiceKind":\ "Filter", "Description":\ \\
"The truncate float service", "Requests":\ "", "Path":\ \\
"\textellipsis/mpmTruncateFilterService", "SecondaryInputs":\ \openSq{} \textbraceleft{}
"Name":\ \\
"/shorten/input", "Protocol":\ "d+" \textbraceright{} \closeSq, "SecondaryOutputs":\ 
\openSq{} \textbraceleft{} "Name":\ \\
"/shorten/output", "Protocol":\ "i+" \textbraceright{} \closeSq{} \textbraceright{}
\closeSq
\outputEnd{}
or, if tab--delimited output is requested, with tabs shown as
`\texttt{\boldmath{$\vdash$}}':
\outputBegin{}
/\dollarService\pseudotab{}Registry\pseudotab{}Registry\pseudotab{}The Registry service%
\pseudotab{}associate - \\
associate a channel with another channel\textbackslash{}ndisassociate - remove all\\
associations for a channel\textbackslash{}ngetAssociates - return the associations of a\\
channel\textbackslash{}nmatch - return the channels for services matching the criteria\\
provided\textbackslash{}nping - update the last-pinged information for a channel or
record\\
the information for a service on the given channel\textbackslash{}nregister - record the\\
information for a service on the given channel\textbackslash{}nunregister - remove the\\
information for a service on the given channel\pseudotab\textellipsis/%
mpmRegistryService\pseudotwotabs\\
/\dollarService/status\textbraceleft{}protocol=s\textbraceright\\

/\serviceName/input/randomburst\pseudotab{}RandomBurst\pseudotab{}Input\pseudotab\\
The random burst input service\pseudotwotabs\textellipsis/mpmRandomBurstService%
\pseudotwotabs\\
/\serviceName/input/randomburst/output\textbraceleft{}protocol=d+\textbraceright\\

/\serviceName/output/recordintegers\pseudotab{}RecordIntegers\pseudotab{}Output%
\pseudotab\\
The record integers output service\pseudotwotabs\textellipsis/%
mpmRecordIntegersService\pseudotab\\
/\serviceName/output/recordintegers/input\textbraceleft{}protocol=i+\textbraceright\\

/shorten\pseudotab{}TruncateFloat\pseudotab{}Filter\pseudotab{}%
The truncate float service\pseudotwotabs\\
\textellipsis/mpmTruncateFloatService\pseudotab{}/shorten/input\textbraceleft{}%
protocol=d+\textbraceright\pseudotab\\
/shorten/output\textbraceleft{}protocol=i+\textbraceright
\outputEnd{}
For clarity, the full paths to the executables have been shortened and blank lines have
been added; in the actual output the paths would be absolute paths and there would be no
blank lines between the output rows.
Note that, if no services are found, the output would be empty.
\tertiaryEnd{\utilityNameE{mpmServiceLister}}
\tertiaryStart{\utilityNameP{mpmServiceMetrics}}
The program \utilityNameX{mpmServiceMetrics} displays measurements for the channels of one
or more active services in the \mplusm{} installation.
It lists each \yarp{} network port for the service and details about the activity on the
channel.
The program takes an optional argument for the \yarp{} network port of the service; if no
port is specified, all services are displayed.
It has two command--line options:
\begin{itemize}
\item \textbf{--j} generate JSON--formatted output
\item \textbf{--t} generate output in tab--delimited form
\end{itemize}
If neither option is present, the output is written as simple text.\\

The output consists of the \yarp{} network port that has been measured, the date and time
of the measurement, the number of input and output bytes transferred and the number of
input and output transfers.
The primary \yarp{} network port for the service as well as its secondary ports are
reported, along with an entry labelled `auxiliary', which represents any transient
\yarp{} network ports that the service has used.\\

All services use transient \yarp{} network ports to, at least, register themselves.\\

For example, the default output could be (with the lines wrapped for clarity):
\outputBegin{}
/\dollarService\\
\settowidth{\utilLen}{/status}%
\hspace*{\utilLen}/\dollarService:\ \openSq{}date:\ 2014-10-10, time:\ 09:16:32,
bytes in:\ 11221, out:\ 52535,\\
\settowidth{\utilLen}{/Service/status: }%
\hspace*{\utilLen}messages in:\ 265, out:\ 264\closeSq\\
\settowidth{\utilLen}{/servi}%
\hspace*{\utilLen}auxiliary:\ \openSq{}date:\ 2014-10-10, time:\ 09:16:32, bytes in:\ 0,
out:\ 0, messages\\
\settowidth{\utilLen}{/Service/status: }%
\hspace*{\utilLen}in:\ 0, out:\ 0\closeSq\\
/\dollarService/status:\ \openSq{}date:\ 2014-10-10, time:\ 09:16:32, bytes in:\ 0,
out:\ 17292,\\
\hspace*{\utilLen}messages in:\ 0, out:\ 176\closeSq\\

/\serviceName/input/leapmotion\\
\settowidth{\utilLen}{/output}%
\hspace*{\utilLen}/\serviceName/input/leapmotion:\ \openSq{}date:\ 2014-10-10, time:\
09:16:32, bytes in:\ \\
\settowidth{\utilLen}{/xservicx/input/leapmotion/output: }%
\hspace*{\utilLen}54, out:\ 4842, messages in:\ 3, out:\ 2\closeSq\\
\settowidth{\utilLen}{/xservicx/input/leapmoti}%
\hspace*{\utilLen}auxiliary:\ \openSq{}date: 2014-10-10, time: 09:16:32, bytes in:\ \\
\settowidth{\utilLen}{/xservicx/input/leapmotion/output: }%
\hspace*{\utilLen}15, out:\ 53, messages in:\ 1, out:\ 1\closeSq\\
/\serviceName/input/leapmotion/output:\ \openSq{}date:\ 2014-10-10, time:\ 09:16:32, bytes
in:\ \\
\hspace*{\utilLen}0, out:\ 0, messages in:\ 0, out:\ 0\closeSq
\outputEnd{}
\newpage
or, if JSON--formatted output is requested:
\outputBegin{}
\openSq{} \openSq{} \textbraceleft{} "channel":\ "/\dollarService", "date":\
"2014-10-10", "time":\ "09:18:42", "inBytes":\ \\
"12091", "inMessages":\ "285", "outBytes":\ "56155", "outMessages":\ "284"
\textbraceright, \textbraceleft\\
"channel":\ "auxiliary", "date":\ "2014-10-10", "time":\ "09:18:42", "inBytes":\ "0",\\
"inMessages":\ "0", "outBytes":\ "0", "outMessages":\ "0" \textbraceright,
\textbraceleft{} "channel":\ \\
"/\dollarService/status", "date":\ "2014-10-10", "time":\ "09:18:42", "inBytes":\
"0",\\
"inMessages":\ "0", "outBytes":\ "18678", "outMessages":\ "190" \textbraceright{}
\closeSq,\\
\openSq{} \textbraceleft{} "channel":\ "/\serviceName/input/leapmotion", "date":\
"2014-10-10", "time":\ \\
"09:18:42", "inBytes":\ "94", "inMessages":\ "5", "outBytes":\ "6600", "outMessages":\ \\
"4" \textbraceright, \textbraceleft{} "channel":\ "auxiliary", "date":\ "2014-10-10",
"time":\ "09:18:42",\\
"inBytes":\ "127", "inMessages":\ "15", "outBytes":\ "739", "outMessages":\ "15"
\textbraceright,\\
\textbraceleft{} "channel":\ "/\serviceName/input/leapmotion/output", "date":\
"2014-10-10", "time":\ \\
"09:18:42", "inBytes":\ "0", "inMessages":\ "0", "outBytes":\ "0", "outMessages":\ \\
"0" \textbraceright{} \closeSq{} \closeSq
\outputEnd{}
or, if tab--delimited output is requested, with tabs shown as
`\texttt{\boldmath{$\vdash$}}':
\outputBegin{}
/\dollarService\pseudotab{}2014-10-10\pseudotab{}09:16:54\pseudotab{}11460%
\pseudotab{}54313\pseudotab{}271\pseudotab{}270\\
auxiliary\pseudotab{}2014-10-10\pseudotab{}09:16:54\pseudotab{}0\pseudotab{}0\pseudotab{}%
0\pseudotab{}0\\
/\dollarService/status\pseudotab{}2014-10-10\pseudotab{}09:16:54\pseudotab{}0%
\pseudotab{}17589\pseudotab{}0\pseudotab{}179\\
/\serviceName/input/leapmotion\pseudotab{}2014-10-10\pseudotab{}09:16:54\pseudotab{}74%
\pseudotab{}5721\pseudotab{}4\pseudotab{}3\\
auxiliary\pseudotab{}2014-10-10\pseudotab{}09:16:54\pseudotab{}39\pseudotab{}200%
\pseudotab{}4\pseudotab{}4\\
/\serviceName/input/leapmotion/output\pseudotab{}2014-10-10\pseudotab{}09:16:54%
\pseudotab{}0\pseudotab{}0\pseudotab{}0\pseudotab{}0
\outputEnd{}
For the default output, multiple entries will be separated by a blank line; for
tab--delimited output each entry is on a line by itself and for JSON--formatted output,
the entries are objects within an array.
Note that, if no matching request is found, the JSON--formatted output would be:
\outputBegin{}
\sqPair
\outputEnd{}
while the default output would be:
\outputBegin{}
No matching request found.
\outputEnd{}
and the tab--delimited output would be empty.
If no matching service is found, the default output would be:
\outputBegin{}
No services found.
\outputEnd{}
and the JSON--formatted and tab--delimited outputs would be empty.
\tertiaryEnd{\utilityNameE{mpmServiceMetrics}}
\newpage
\tertiaryStart{\utilityNameP{mpmVersion}}
The program \utilityNameX{mpmVersion} displays the version numbers for \mplusm{}, \yarp{}
and ACE, the low--level networking layer used by \mplusm{} and \yarp{}.
It has two command--line options:
\begin{itemize}
\item \textbf{--j} generate JSON--formatted output
\item \textbf{--t} generate output in tab--delimited form
\end{itemize}
If neither option is present, the output is written as simple text.\\

For example, the default output could be:
\outputBegin{}
Movement And Meaning Version:\ 1.4.14, YARP Version:\ 2.3.61, ACE Version:\ 6.2.6
\outputEnd{}
or, if JSON--formatted output is requested:
\outputBegin{}
\textbraceleft{} "M+M":\ "1.4.14", "YARP":\ "2.3.61", "ACE":\ "6.2.6" \textbraceright
\outputEnd{}
or, if tab--delimited output is requested, with tabs shown as
`\texttt{\boldmath{$\vdash$}}':
\outputBegin{}
1.4.14\pseudotab{}2.3.61\pseudotab{}6.2.6
\outputEnd{}
\tertiaryEnd{\utilityNameE{mpmVersion}}
\secondaryEnd{}
\newpage
\secondaryStart[UtilityServicesAndClients]{Utility~Services~and~Clients}
\tertiaryStart{\utilityNameP{mpmRequestCounterService}}
The \utilityNameX{mpmRequestCounterService} application is a background service that is
used to determine the average time to send a simple request, process it and return a
response.\\

It responds to the \requestsNameR{Miscellaneous}{Miscellaneous}{resetcounter} and
\requestsNameR{Miscellaneous}{Miscellaneous}{stats} requests sent by the
companion application \utilityNameR{mpmRequestCounterClient} to manage the statistics
that it gathers.\\

The application also has one optional parameter:
\begin{itemize}
\item \textbf{-r:} report the service metrics when the application exits
\end{itemize}
Note that only one copy of the \utilityNameX{mpmRequestCounterService} application can be
running at a time in an \mplusm{} installation, due to its fixed \yarp{} network port.
\tertiaryEnd{\utilityNameE{mpmRequestCounterService}}
\tertiaryStart{\utilityNameP{mpmRequestCounterClient}}
The \utilityNameX{mpmRequestCounterClient} application is a command--line tool to
measure the average time to process a simple request.\\

It uses the \requestsNameR{Miscellaneous}{Miscellaneous}{resetcounter} and
\requestsNameR{Miscellaneous}{Miscellaneous}{stats} requests sent to the
\utilityNameR{mpmRequestCounterService} application to gather the statistics, and a
`dummy' request to provide the requests that are being measured.\\

The program has no arguments or options; it asks for the number of requests to send via
the prompt:
\outputBegin{}
How many requests?
\outputEnd{}
Entering a zero value will exit the program.
An example execution of the program, with the \utilityNameR{mpmRequestCounterService}
application running in the background and user input shown in bold, could be:
\outputBegin{}
How many requests?\ \textbf{10000}\\
count = 10000, elapsed time = 2.2 seconds, average time = 0.22 milliseconds.\\
How many requests?\ \textbf{300000}\\
count = 300000, elapsed time = 1.20052 minutes, average time = 0.240104 milliseconds.\\
How many requests?\ \textbf{0}
\outputEnd{}
\tertiaryEnd{\utilityNameE{mpmRequestCounterClient}}
\secondaryEnd{}
\primaryEnd{}
