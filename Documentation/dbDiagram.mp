% File: dbDiagram.mpinput rboxes%input metaobjinput TEXTEXPRE("%&latex" & char(10) & "\documentclass{report}\begin{document}");TEXPOST("\end{document}");numeric gap, arrowFactor, roundOut;pair arrowStartCorrection, arrowEndCorrection, roundOutCorrection;pair leftGap, rightGap;arrowFactor = 3;gap = 30;roundOut = 4;arrowStartCorrection = (arrowFactor / 2, 0);arrowEndCorrection = (arrowFactor / 1.1, 0);roundOutCorrection = (roundOut, 0);leftGap = (8, 0);rightGap = (12, 0);defaultdx := 0;beginfig(-1);% Associates/1boxit.AssociatesTitle(btex\strut\tt Associates etex);boxit.associateFieldLeft(btex\strut\tt$\kappa$ etex);boxit.associateFieldCentre(btex\strut\tt{}associate etex);boxit.associateFieldRight(btex\strut\tt{}Text:I:U etex);AssociatesTitle.sw = associateFieldLeft.nw;AssociatesTitle.se = associateFieldRight.ne;associateFieldLeft.e + leftGap = associateFieldCentre.w;associateFieldCentre.e + rightGap = associateFieldRight.w;drawunboxed(associateFieldLeft, associateFieldCentre, associateFieldRight,			AssociatesTitle);rboxit.Associates(btex etex);xpart Associates.w = xpart AssociatesTitle.w - roundOut;xpart Associates.e = xpart AssociatesTitle.e + roundOut;ypart Associates.n = ypart AssociatesTitle.n + roundOut;ypart Associates.s = ypart associateFieldCentre.s - roundOut;drawboxed(Associates);draw associateFieldLeft.nw - roundOutCorrection --				associateFieldRight.ne + roundOutCorrection;% ChannelAssociates/2boxit.ChannelsAssociatesTitle(btex\strut\tt ChannelsAssociates etex);ChannelsAssociatesTitle.nw = AssociatesTitle.ne + (gap, 0);boxit.associatesIdFieldLeft(btex\strut\tt$\iota$ etex);boxit.associatesIdFieldCentre(btex\strut\tt{}associates\_id etex);boxit.associatesIdFieldRight(btex\strut\tt{}Text:I:N etex);ChannelsAssociatesTitle.sw = associatesIdFieldLeft.nw;ChannelsAssociatesTitle.se = associatesIdFieldRight.ne;associatesIdFieldLeft.e + leftGap = associatesIdFieldCentre.w;associatesIdFieldCentre.e + rightGap = associatesIdFieldRight.w;boxit.channelsIdFieldLeft(btex\strut\tt$\iota$ etex);boxit.channelsIdFieldCentre(btex\strut\tt{}channels\_id etex);boxit.channelsIdFieldRight(btex\strut\tt{}Integer:I:N etex);associatesIdFieldLeft.sw = channelsIdFieldLeft.nw;associatesIdFieldRight.se = channelsIdFieldRight.ne;channelsIdFieldCentre.w = (xpart associatesIdFieldCentre.w, ypart channelsIdFieldLeft.e);boxit.directionFieldLeft(btex\strut\tt$\diamond$ etex);boxit.directionFieldCentre(btex\strut\tt{}direction etex);boxit.directionFieldRight(btex\strut\tt{}Integer:N etex);channelsIdFieldLeft.sw = directionFieldLeft.nw;channelsIdFieldRight.se = directionFieldRight.ne;directionFieldCentre.w = (xpart associatesIdFieldCentre.w, ypart directionFieldLeft.e);boxit.indexes1(btex\strut\tt{}Indexes\ (2) etex);directionFieldLeft.sw = indexes1.nw;drawunboxed(channelsIdFieldLeft, channelsIdFieldCentre, channelsIdFieldRight,			associatesIdFieldLeft, associatesIdFieldCentre, associatesIdFieldRight,			ChannelsAssociatesTitle, directionFieldLeft, directionFieldCentre,			directionFieldRight, indexes1);rboxit.ChannelAssociates(btex etex);xpart ChannelAssociates.w = xpart ChannelsAssociatesTitle.w - roundOut;xpart ChannelAssociates.e = xpart ChannelsAssociatesTitle.e + roundOut;ypart ChannelAssociates.n = ypart ChannelsAssociatesTitle.n + roundOut;ypart ChannelAssociates.s = ypart indexes1.s - roundOut;drawboxed(ChannelAssociates);draw associatesIdFieldLeft.nw - roundOutCorrection --				associatesIdFieldRight.ne + roundOutCorrection;draw channelsIdFieldLeft.nw - roundOutCorrection --				channelsIdFieldRight.ne + roundOutCorrection;draw directionFieldLeft.nw - roundOutCorrection --				directionFieldRight.ne + roundOutCorrection;draw indexes1.nw - roundOutCorrection --				directionFieldRight.se + roundOutCorrection;% Channels/3boxit.ChannelsTitle(btex\strut\tt Channels etex);ChannelsTitle.nw = ChannelsAssociatesTitle.ne + (gap, 0);boxit.channelNameField1Left(btex\strut\tt$\diamond$ etex);boxit.channelNameField1Centre(btex\strut\tt{}channelname etex);boxit.channelNameField1Right(btex\strut\tt{}Text:I:U etex);ChannelsTitle.sw = channelNameField1Left.nw;ChannelsTitle.se = channelNameField1Right.ne;channelNameField1Left.e + leftGap = channelNameField1Centre.w;channelNameField1Centre.e + rightGap = channelNameField1Right.w;boxit.keyField1Left(btex\strut\tt$\kappa$ etex);boxit.keyField1Centre(btex\strut\tt{}key etex);boxit.keyField1Right(btex\strut\tt{}Integer:N etex);channelNameField1Left.sw = keyField1Left.nw;channelNameField1Right.se = keyField1Right.ne;keyField1Centre.w = (xpart channelNameField1Centre.w, ypart keyField1Left.e);boxit.indexes2(btex\strut\tt{}Indexes\ (1) etex);keyField1Left.sw = indexes2.nw;boxit.uniques(btex\strut\tt{}Uniques\ (1) etex);indexes2.sw = uniques.nw;drawunboxed(channelNameField1Left, channelNameField1Centre, channelNameField1Right,			ChannelsTitle, keyField1Left, keyField1Centre, keyField1Right, indexes2,			uniques);rboxit.Channels(btex etex);xpart Channels.w = xpart ChannelsTitle.w - roundOut;xpart Channels.e = xpart ChannelsTitle.e + roundOut;ypart Channels.n = ypart ChannelsTitle.n + roundOut;ypart Channels.s = ypart uniques.s - roundOut;drawboxed(Channels);draw channelNameField1Left.nw - roundOutCorrection --				channelNameField1Right.ne + roundOutCorrection;draw keyField1Left.nw - roundOutCorrection --				keyField1Right.ne + roundOutCorrection;draw indexes2.nw - roundOutCorrection --				keyField1Right.se + roundOutCorrection;draw uniques.nw - roundOutCorrection --				(xpart keyField1Right.se, ypart uniques.ne) + roundOutCorrection;% RequestsKeywords/4boxit.RequestsKeywordsTitle(btex\strut\tt RequestsKeywords etex);xpart RequestsKeywordsTitle.w = xpart associateFieldLeft.w;ypart RequestsKeywordsTitle.n = ypart indexes1.s - gap;boxit.keywordsIdFieldLeft(btex\strut\tt$\iota$ etex);boxit.keywordsIdFieldCentre(btex\strut\tt{}keywords\_id etex);boxit.keywordsIdFieldRight(btex\strut\tt{}Text:I:N etex);RequestsKeywordsTitle.sw = keywordsIdFieldLeft.nw;RequestsKeywordsTitle.se = keywordsIdFieldRight.ne;boxit.requestsIdFieldLeft(btex\strut\tt$\iota$ etex);boxit.requestsIdFieldCentre(btex\strut\tt{}requests\_id etex);boxit.requestsIdFieldRight(btex\strut\tt{}Integer:I:N etex);keywordsIdFieldLeft.sw = requestsIdFieldLeft.nw;keywordsIdFieldRight.se = requestsIdFieldRight.ne;requestsIdFieldLeft.e + leftGap = requestsIdFieldCentre.w;requestsIdFieldCentre.e + rightGap = requestsIdFieldRight.w;keywordsIdFieldCentre.w = (xpart requestsIdFieldCentre.w, ypart keywordsIdFieldLeft.e);boxit.indexes3(btex\strut\tt{}Indexes\ (2) etex);requestsIdFieldLeft.sw = indexes3.nw;drawunboxed(requestsIdFieldLeft, requestsIdFieldCentre, requestsIdFieldRight,			keywordsIdFieldLeft, keywordsIdFieldCentre, keywordsIdFieldRight,			RequestsKeywordsTitle, indexes3);rboxit.RequestsKeywords(btex etex);xpart RequestsKeywords.w = xpart RequestsKeywordsTitle.w - roundOut;xpart RequestsKeywords.e = xpart RequestsKeywordsTitle.e + roundOut;ypart RequestsKeywords.n = ypart RequestsKeywordsTitle.n + roundOut;ypart RequestsKeywords.s = ypart indexes3.s - roundOut;drawboxed(RequestsKeywords);draw keywordsIdFieldLeft.nw - roundOutCorrection --				keywordsIdFieldRight.ne + roundOutCorrection;draw requestsIdFieldLeft.nw - roundOutCorrection --				requestsIdFieldRight.ne + roundOutCorrection;draw indexes3.nw - roundOutCorrection --				requestsIdFieldRight.se + roundOutCorrection;% Keywords/5boxit.KeywordsTitle(btex\strut\tt Keywords etex);xpart KeywordsTitle.w = xpart uniques.w;ypart KeywordsTitle.n = ypart RequestsKeywordsTitle.n;boxit.keywordFieldLeft(btex\strut\tt$\kappa$ etex);boxit.keywordFieldCentre(btex\strut\tt{}keyword etex);boxit.keywordFieldRight(btex\strut\tt{}Text:I:U etex);KeywordsTitle.sw = keywordFieldLeft.nw;KeywordsTitle.se = keywordFieldRight.ne;keywordFieldLeft.e + leftGap = keywordFieldCentre.w;keywordFieldCentre.e + rightGap = keywordFieldRight.w;drawunboxed(keywordFieldLeft, keywordFieldCentre, keywordFieldRight, KeywordsTitle);rboxit.Keywords(btex etex);xpart Keywords.w = xpart KeywordsTitle.w - roundOut;xpart Keywords.e = xpart KeywordsTitle.e + roundOut;ypart Keywords.n = ypart KeywordsTitle.n + roundOut;ypart Keywords.s = ypart keywordFieldCentre.s - roundOut;drawboxed(Keywords);draw keywordFieldLeft.nw - roundOutCorrection --				keywordFieldRight.ne + roundOutCorrection;% Services/6boxit.ServicesTitle(btex\strut\tt Services etex);xpart ServicesTitle.w = xpart associateFieldLeft.w;ypart ServicesTitle.n = ypart indexes3.s - gap;boxit.channelNameField2Left(btex\strut\tt$\kappa$ etex);boxit.channelNameField2Centre(btex\strut\tt{}channelname etex);boxit.channelNameField2Right(btex\strut\tt{}Text:I:U etex);ServicesTitle.sw = channelNameField2Left.nw;ServicesTitle.se = channelNameField2Right.ne;boxit.descriptionFieldLeft(btex\strut\tt$\diamond$ etex);boxit.descriptionFieldCentre(btex\strut\tt{}description etex);boxit.descriptionFieldRight(btex\strut\tt{}Text etex);channelNameField2Left.sw = descriptionFieldLeft.nw;channelNameField2Right.se = descriptionFieldRight.ne;boxit.executableFieldLeft(btex\strut\tt$\diamond$ etex);boxit.executableFieldCentre(btex\strut\tt{}executable etex);boxit.executableFieldRight(btex\strut\tt{}Text etex);descriptionFieldLeft.sw = executableFieldLeft.nw;descriptionFieldRight.se = executableFieldRight.ne;boxit.nameFieldLeft(btex\strut\tt$\diamond$ etex);boxit.nameFieldCentre(btex\strut\tt{}name etex);boxit.nameFieldRight(btex\strut\tt{}Text:I etex);executableFieldLeft.sw = nameFieldLeft.nw;executableFieldRight.se = nameFieldRight.ne;boxit.requestsDescriptionFieldLeft(btex\strut\tt$\diamond$ etex);boxit.requestsDescriptionFieldCentre(btex\strut\tt{}requestsdescription etex);boxit.requestsDescriptionFieldRight(btex\strut\tt{}Text etex);nameFieldLeft.sw = requestsDescriptionFieldLeft.nw;nameFieldRight.se = requestsDescriptionFieldRight.ne;requestsDescriptionFieldLeft.e + leftGap = requestsDescriptionFieldCentre.w;requestsDescriptionFieldCentre.e + rightGap = requestsDescriptionFieldRight.w;channelNameField2Centre.w = (xpart requestsDescriptionFieldCentre.w,								ypart channelNameField2Left.e);descriptionFieldCentre.w = (xpart requestsDescriptionFieldCentre.w,								ypart descriptionFieldLeft.e);executableFieldCentre.w = (xpart requestsDescriptionFieldCentre.w,								ypart executableFieldLeft.e);nameFieldCentre.w = (xpart requestsDescriptionFieldCentre.w, ypart nameFieldLeft.e);					boxit.indexes4(btex\strut\tt{}Indexes\ (1) etex);requestsDescriptionFieldLeft.sw = indexes4.nw;drawunboxed(requestsDescriptionFieldLeft, requestsDescriptionFieldCentre,			requestsDescriptionFieldRight, ServicesTitle, channelNameField2Left,			channelNameField2Centre, channelNameField2Right, descriptionFieldLeft,			descriptionFieldCentre, descriptionFieldRight, executableFieldLeft,			executableFieldCentre, executableFieldRight, nameFieldLeft, nameFieldCentre,			nameFieldRight, indexes4);rboxit.Services(btex etex);xpart Services.w = xpart ServicesTitle.w - roundOut;xpart Services.e = xpart ServicesTitle.e + roundOut;ypart Services.n = ypart ServicesTitle.n + roundOut;ypart Services.s = ypart indexes4.s - roundOut;drawboxed(Services);draw channelNameField2Left.nw - roundOutCorrection --				channelNameField2Right.ne + roundOutCorrection;draw descriptionFieldLeft.nw - roundOutCorrection --				descriptionFieldRight.ne + roundOutCorrection;draw executableFieldLeft.nw - roundOutCorrection --				executableFieldRight.ne + roundOutCorrection;draw nameFieldLeft.nw - roundOutCorrection --				nameFieldRight.ne + roundOutCorrection;draw requestsDescriptionFieldLeft.nw - roundOutCorrection --				requestsDescriptionFieldRight.ne + roundOutCorrection;draw indexes4.nw - roundOutCorrection --				requestsDescriptionFieldRight.se + roundOutCorrection;% Requests/7boxit.RequestsTitle(btex\strut\tt Requests etex);xpart RequestsTitle.w = xpart uniques.w;ypart RequestsTitle.n = ypart ServicesTitle.n;boxit.channelNameField3Left(btex\strut\tt$\iota$ etex);boxit.channelNameField3Centre(btex\strut\tt{}channelname etex);boxit.channelNameField3Right(btex\strut\tt{}Text:I:U etex);RequestsTitle.sw = channelNameField3Left.nw;RequestsTitle.se = channelNameField3Right.ne;channelNameField3Left.e + leftGap = channelNameField3Centre.w;channelNameField3Centre.e + rightGap = channelNameField3Right.w;boxit.detailsFieldLeft(btex\strut\tt$\diamond$ etex);boxit.detailsFieldCentre(btex\strut\tt{}details etex);boxit.detailsFieldRight(btex\strut\tt{}Text:N etex);channelNameField3Left.sw = detailsFieldLeft.nw;channelNameField3Right.se = detailsFieldRight.ne;detailsFieldCentre.w = (xpart channelNameField3Centre.w,								ypart detailsFieldLeft.e);boxit.inputFieldLeft(btex\strut\tt$\diamond$ etex);boxit.inputFieldCentre(btex\strut\tt{}input etex);boxit.inputFieldRight(btex\strut\tt{}Text:N etex);detailsFieldLeft.sw = inputFieldLeft.nw;detailsFieldRight.se = inputFieldRight.ne;inputFieldCentre.w = (xpart channelNameField3Centre.w, ypart inputFieldLeft.e);boxit.keyField2Left(btex\strut\tt$\kappa$ etex);boxit.keyField2Centre(btex\strut\tt{}key etex);boxit.keyField2Right(btex\strut\tt{}Integer:N etex);inputFieldLeft.sw = keyField2Left.nw;inputFieldRight.se = keyField2Right.ne;keyField2Centre.w = (xpart channelNameField3Centre.w, ypart keyField2Left.e);boxit.outputFieldLeft(btex\strut\tt$\diamond$ etex);boxit.outputFieldCentre(btex\strut\tt{}output etex);boxit.outputFieldRight(btex\strut\tt{}Text:N etex);keyField2Left.sw = outputFieldLeft.nw;keyField2Right.se = outputFieldRight.ne;outputFieldCentre.w = (xpart channelNameField3Centre.w, ypart outputFieldLeft.e);boxit.requestFieldLeft(btex\strut\tt$\diamond$ etex);boxit.requestFieldCentre(btex\strut\tt{}request etex);boxit.requestFieldRight(btex\strut\tt{}Text:I etex);outputFieldLeft.sw = requestFieldLeft.nw;outputFieldRight.se = requestFieldRight.ne;requestFieldCentre.w = (xpart channelNameField3Centre.w, ypart requestFieldLeft.e);boxit.versionFieldLeft(btex\strut\tt$\diamond$ etex);boxit.versionFieldCentre(btex\strut\tt{}version etex);boxit.versionFieldRight(btex\strut\tt{}Text:N etex);requestFieldLeft.sw = versionFieldLeft.nw;requestFieldRight.se = versionFieldRight.ne;versionFieldCentre.w = (xpart channelNameField3Centre.w, ypart versionFieldLeft.e);boxit.indexes5(btex\strut\tt{}Indexes\ (2) etex);versionFieldLeft.sw = indexes5.nw;drawunboxed(channelNameField3Left, channelNameField3Centre, channelNameField3Right,			RequestsTitle, detailsFieldLeft, detailsFieldCentre, detailsFieldRight,			inputFieldLeft, inputFieldCentre, inputFieldRight, keyField2Left,			keyField2Centre, keyField2Right, outputFieldLeft, outputFieldCentre,			outputFieldRight, requestFieldLeft, requestFieldCentre, requestFieldRight,			versionFieldLeft, versionFieldCentre, versionFieldRight, indexes5);rboxit.Requests(btex etex);xpart Requests.w = xpart RequestsTitle.w - roundOut;xpart Requests.e = xpart RequestsTitle.e + roundOut;ypart Requests.n = ypart RequestsTitle.n + roundOut;ypart Requests.s = ypart indexes5.s - roundOut;drawboxed(Requests);draw channelNameField3Left.nw - roundOutCorrection --				channelNameField3Right.ne + roundOutCorrection;draw detailsFieldLeft.nw - roundOutCorrection --				detailsFieldRight.ne + roundOutCorrection;draw inputFieldLeft.nw - roundOutCorrection --				inputFieldRight.ne + roundOutCorrection;draw keyField2Left.nw - roundOutCorrection --				keyField2Right.ne + roundOutCorrection;draw outputFieldLeft.nw - roundOutCorrection --				outputFieldRight.ne + roundOutCorrection;draw requestFieldLeft.nw - roundOutCorrection --				requestFieldRight.ne + roundOutCorrection;draw versionFieldLeft.nw - roundOutCorrection --				versionFieldRight.ne + roundOutCorrection;draw indexes5.nw - roundOutCorrection -- versionFieldRight.se + roundOutCorrection;	pickup pencircle scaled arrowFactor;ahlength := 6;ahangle := 60;linejoin := mitered;liecap := butt;		drawarrow associatesIdFieldLeft.w - (arrowStartCorrection + roundOutCorrection) --								associateFieldRight.e + (arrowEndCorrection +								roundOutCorrection);drawarrow channelsIdFieldRight.e + (arrowStartCorrection + roundOutCorrection) --								keyField1Left.w - (arrowEndCorrection +								roundOutCorrection);drawarrow keywordsIdFieldRight.e + (arrowStartCorrection + roundOutCorrection) --								keywordFieldLeft.w - (arrowEndCorrection +								roundOutCorrection);drawarrow channelNameField2Right.e + (arrowStartCorrection + roundOutCorrection) --								channelNameField3Left.w - (arrowEndCorrection +								roundOutCorrection);drawarrow requestsIdFieldRight.e + (arrowStartCorrection + roundOutCorrection) --								((xpart requestsIdFieldRight.e +									xpart keyField2Left.w) / 2,								ypart requestsIdFieldRight.e) --								((xpart requestsIdFieldRight.e +									xpart keyField2Left.w) / 2,								ypart keyField2Left.w) -- keyField2Left.w -								(arrowEndCorrection + roundOutCorrection);			endfig;end