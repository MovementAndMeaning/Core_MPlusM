\ProvidesFile{MMinternalDb.tex}[v1.0.0]
\appendixStart[InternalDatabaseStructure]{\textitcorr{Internal~Database~Structure}}%
Here are the SQL statements used to construct the internal database:
\outputBegin{}
\begin{verbatim}
CREATE TABLE IF NOT EXISTS Services(
       channelname Text NOT NULL DEFAULT _{} PRIMARY KEY ON CONFLICT REPLACE,
       name Text NOT NULL DEFAULT _,
       description Text NOT NULL DEFAULT _,
       executable Text NOT NULL DEFAULT _,
       requestsdescription Text NOT NULL DEFAULT _,
       tag Text NOT NULL DEFAULT  _);
CREATE INDEX IF NOT EXISTS Services_name_idx ON Services(name);
CREATE TABLE IF NOT EXISTS Keywords(
       keyword Text NOT NULL DEFAULT _{} PRIMARY KEY ON CONFLICT IGNORE;
CREATE TABLE IF NOT EXISTS Requests(
       channelname Text NOT NULL DEFAULT _{} REFERENCES Services(channelname),
       request Text NOT NULL DEFAULT _,
       input Text,
       output Text,
       version Text,
       details Text,
       key Integer PRIMARY KEY);
CREATE INDEX IF NOT EXISTS Requests_request_idx ON Requests(request);
CREATE INDEX IF NOT EXISTS Requests_channelname_idx ON Requests(channelname);
CREATE TABLE IF NOT EXISTS RequestsKeywords(
       keywords_id Text REFERENCES Keywords(keyword),
       requests_id Integer REFERENCES Requests(key));
CREATE INDEX IF NOT EXISTS RequestsKeywords_Keywords_id_idx ON
       RequestsKeywords(keywords_id);
CREATE INDEX IF NOT EXISTS RequestsKeywords_Requests_id_idx ON
       RequestsKeywords(requests_id);
CREATE TABLE IF NOT EXISTS Channels(
       channelname Text NOT NULL UNIQUE DEFAULT _,
       key Integer PRIMARY KEY);
CREATE INDEX IF NOT EXISTS Channels_channelname_idx ON Channels(channelname);
CREATE TABLE IF NOT EXISTS Associates(
       associate Text NOT NULL DEFAULT _{} PRIMARY KEY ON CONFLICT IGNORE);
CREATE TABLE IF NOT EXISTS ChannelsAssociates(
       channels_id Integer REFERENCES Channels(key),
       associates_id Text REFERENCES Associates(associate),
       direction Integer);
CREATE INDEX IF NOT EXISTS ChannelsAssociates_Associates_id_idx ON
       ChannelsAssociates(associates_id);
CREATE INDEX IF NOT EXISTS ChannelsAssociates_Channels_id_idx ON
       ChannelsAssociates(channels_id);
\end{verbatim}
\outputEnd{}
\condPage{}
And here is the internal database, in graphical form:\\
\objDiagram{MMdbDiagram}{dbDiagram}{Database layout}
\appendixEnd{}
