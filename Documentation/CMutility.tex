\ProvidesFile{CMutility.tex}[v1.0.0]
\primaryStart{Channel~Manager}
The utility programs that are provided with \mplusm{} provide access to the processes that
are running in the \mplusm{} installation.\\

Currently there is one GUI\longDash{}based tool, the \emph{Channel Manager} application,
which provides a view of the state of connections within an \mplusm{} installation, as
well as managing non\longDash\mplusm{} \yarp{} network connections.
\objDiagram{CMcmDiagram}{cmDiagram}{Channel~Manager structure}

The \emph{Channel Manager} application displays a single window view of the connections
within a \yarp{} network, with features designed to make management of an \mplusm{}
installation easier.
Simple \yarp{} network ports are shown as rectangles with a title consisting of the IP
address and port number of the port, and the \yarp{} name for the port as the body of the
rectangle, prefixed with `In' for input\longDash{}only ports, `Out' for
output\longDash{}only ports and `I/O' for general ports.\\

\mplusm{} services are shown as rectangles with a title consisting of the name provided by
the service, with the primary \yarp{} network connection as the first row in the body of
the rectangle, prefixed with `S' to indicate that it is a service connection.
Secondary \yarp{} network connections appear as rows below the primary connection,
prefixed with `In' for input\longDash{}only connections and `Out' for
output\longDash{}only connections.
\mplusm{} \inputOutput{} services do not have a visual appearance that is distinct from
other \mplusm{} services \longDash{} the connections that are allowed, however, are more
restricted.
Both \mplusm{} services and clients can have multiple secondary \yarp{} network ports.\\

\mplusm{} simple clients are shown as rectangles with a title consisting of the IP address
and port number of their connection to a service, with a row containing the \yarp{}
network connection prefixed with `C'.
\mplusm{} adapters are similar to \mplusm{} simple clients, except that they have
additional rows above the client\longDash{}service \yarp{} network connection for the
secondary \yarp{} network connections, with prefixes of `In' for input\longDash{}only
connections and `Out' for output\longDash{}only connections.\\

Connections between ports are shown as lines with one of three thicknesses and one of
three colours.
The thinnest lines represent simple \yarp{} network connections, which have no explicit
behaviours.
The middle thickness lines represent connections between \inputOutput{} services; these
connections have specific behaviours.
The thickest lines represent connections between clients and services, which are not
modifiable by this tool.
TCP/IP connections, which are the default, are shown in teal, UDP connections are shown in
purple and other connections are shown in orange.
Note that the tool can only create TCP/IP or UDP connections.\\

To create a connection between two ports, click on the source port with the `Option' /
`Alt' key held down and either drag the mouse to the destination port or click on the
destination port.
If the `Shift' is held down at the same time as the `Option' / `Alt' key, the new
network connection will be UDP rather than TCP/IP.
While an `add' operation is active, the source port will be overlaid with a small filled
yellow circle.
To clear a pending `add' operation, either click on the source port a second time or click
somewhere other than a port.
Note that it is not possible to add a connection from an input\longDash{}only port, from a
client port to a non\longDash{}service port, or from an output\longDash{}only port of an
\inputOutput{} service to an input\longDash{}only port of another \inputOutput{} service
if the ports do not have matching protocols.
\objScaledDiagram{images/beforeAdd}{beforeAdd}{Before adding a connection}{0.8}

\objScaledDiagram{images/clickAdd}{clickAdd}{Clicking to add a connection}{0.8}

\objScaledDiagram{images/afterAdd}{afterAdd}{After adding a connection}{0.8}
\clearpage
\objScaledDiagram{images/dragAdd2}{dragAdd}{Adding a connection via drag}{0.8}

To remove a connection between two ports, click on the source port with the `Command' key
held down and then click on the destination port.
While a `remove' operation is active, the source port will be overlaid with a small
hollow yellow circle.
To clear a pending `remove' operation, either click on the source port a second time or
click on a port that is not connected to the source port or somewhere other than a port.
Note that is is not possible to remove a connection from a client to a service.
\objScaledDiagram{images/beforeRemove}{beforeRemove}{Removing a connection}{0.8}

Clicking on a rectangular object with no modifier key held down allows the user to drag
the object around in the window.
Note that connections cannot be selected by clicking on the line that represents them.
\clearpage
Doing a right\longDash{}mouse click in the background, displays a popup menu with three
choices:
\begin{itemize}
\item\textbf{Repaint} force a repaint, in case there's a `glitch' of the display; this
can also be triggered via a \textbf{Cmd\longDash{}R} command
\item\exSp\textbf{Invert background} invert the background; this can also be triggered via
a \textbf{Cmd\longDash{}I} command
\item\exSp\textbf{White background} switch between a black~/~white background and a
gradient; this can also be triggered via a \textbf{Cmd\longDash{}B} command
\end{itemize}
\objScaledDiagram{images/backgroundMenu}{backgroundMenu}{Background menu}{0.7}
Doing a right\longDash{}mouse click on the title of a rectangle that does not represent a
service displays a popup menu with two choices:
\begin{itemize}
\item\textbf{Display entity information} display information about the entity
\item\exSp\textbf{Display detailed entity information} display information about the
entity
\end{itemize}
\objScaledDiagram{images/entityMenu}{entityMenu}{Entity menu}{0.7}
\clearpage
Doing a right\longDash{}mouse click on the title of a rectangle representing a service
displays a popup menu with four choices, which depend on whether the `Service metrics
collection' menu item is enabled:
\begin{itemize}
\item\textbf{Display service information} display information about the service
\item\exSp\textbf{Display detailed service information} display information about the
service, including the (non\longDash{}default) requests for the service
\item\exSp\textbf{Disable / Enable service metrics collection} disable or enable the
collection of service metrics, which affects the `Display service metrics' and `Display
channel metrics' menu items
\item\exSp\textbf{Display service metrics} display information about the activity on each
port of the service \longDash{} the number of bytes and number of messages sent to and
from the port; the category `auxiliary' represents the anonymous ports used by the service
during its operation
\end{itemize}
\objDoubleScaledDiagram{images/serviceMenuMetricsDisabled}%
{images/serviceMenuMetricsEnabled}{serviceMenu}%
{Service menu (Left=Service metrics disabled, Right=Service metrics enabled)}{0.7}

Doing a right\longDash{}mouse click on the primary channel of a service displays a popup
menu with three choices, which depend on whether the `Service metrics collection' menu
item is enabled:
\begin{itemize}
\item\textbf{Display channel information} display information about the channel
\item\exSp\textbf{Display detailed channel information} generate output in
tab\longDash{}delimited form
\item\exSp\textbf{Display channel metrics} display information about the activity on the
channel \longDash{} the number of bytes and the number of messages sent to and from the
channel
\end{itemize}
\objDoubleScaledDiagram{images/serviceChannelMenuMetricsDisabled}%
{images/serviceChannelMenuMetricsEnabled}%
{serviceChannelMenu}{Primary channel menu (Left=Service metrics disabled, Right=Service
metrics enabled)}%
{0.7}
\clearpage
Doing a right\longDash{}mouse click on a regular port displays a popup menu with two
choices:
\begin{itemize}
\item\textbf{Display port information} display information about the port
\item\exSp\textbf{Display detailed port information} display information about the port
\end{itemize}
\objScaledDiagram{images/portMenu}{portMenu}{Regular port menu}{0.7}

Doing a right\longDash{}mouse click on a non\longDash{}primary channel of a service
displays a popup menu with five choices, which depend on whether the `Service metrics
collection' menu item is enabled:
\begin{itemize}
\item\textbf{Display channel information} display information about the channel,
including the protocol for the channel
\item\exSp\textbf{Display detailed channel information} display information about the
channel, including the protocol for the channel and a description of the protocol
\item\exSp\textbf{Display channel metrics} display information about the activity on the
channel \longDash{} the number of bytes and the number of messages sent to and from the
channel
\item\exSp\textbf{Enable activity indicator} \longDash{} this is currently not
implemented, so it is disabled
\item\exSp\textbf{Add scrolling monitor} \longDash{} this is currently not implemented, so
it is disabled
\end{itemize}
\objDoubleScaledDiagram{images/regularChannelMenuMetricsDisabled}%
{images/regularChannelMenuMetricsEnabled}%
{regularChannelMenu}%
{Non\longDash{}primary channel menu (Left=Service metrics disabled, Right=Service metrics
enabled)}{0.7}
\clearpage
The positions of the objects within the window are stored in the file
`\asCode{settings.txt}' within the `\asCode{Channel Manager}' directory inside the
user\longDash{}specific application data directory.
On Microsoft Windows, this will likely be\\
``\asCode{\textbackslash{}Documents~and~Settings\textbackslash{}username%
\textbackslash{}Application~Data}'' while, for Macintosh OS X, it will likely be\\
``\asCode{\textasciitilde/Library}'' and, for Linux, it is \TBD.\\
\primaryEnd{}
