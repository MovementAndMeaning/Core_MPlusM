\ProvidesFile{MMbuildingFromSource.tex}[v1.0.0]
\appendixStart[BuildingFromSource]{\textitcorr{Building~\mplusm{}~From~Source}}%
An \mplusm{} installation is normally simply installed according to the
\emph{\MMM{}~Installation} manual.
It is also possible to build a customized \mplusm{} from the source files, which can be
done if the \asCode{Developer} package has also been installed.
\secondaryStart{Prerequisites}
\tertiaryStart{General~prerequisites}
At a minimum, the source files from the \asCode{Developer} package must be present on the
system, along with a \compLang{C++} development environment.
Note that the source files are provided as \textbf{ZIP} archive files that contain a
snapshot of the \asCode{git} repositories where the source code is stored.
\tertiaryEnd{}
\tertiaryStart{Prerequisites~for~Macintosh~OS~X}
\begin{itemize}
\item\asCode{Xcode} is available from the Macintosh App Store and provides the
\compLang{C++} development environment for Macintosh OS~X
\item\exSp{} The \asCode{Xcode} command\longDash{}line tools must be installed, using the
command `\asCode{xcode-select {-}{-}install}'
\item\exSp{} The \asCode{ccmake} and \asCode{cmake} command\longDash{}line tools, which
can be installed using \asCode{MacPorts} or directly from the web\longDash{}page
\companyReference{http://www.cmake.org/download}{http://www.cmake.org/download}
\item\exSp{} The \asCode{autoconf213} command\longDash{}line tool, which can be installed
using \asCode{MacPorts}; note that this is only needed if \textbf{SpiderMonkey} is being
built
\item\exSp{} The \asCode{Packages} GUI tool, from
\companyReference{http://s.sudre.free.fr/Software/Packages/about.html}{St\'ephane Sudre};
this is only needed if you wish to create installer packages after building \mplusm
\end{itemize}
\tertiaryEnd{}
\tertiaryStart{Prerequisites~for~Microsoft~Windows}
\begin{itemize}
\item\asCode{Visual Studio} is available from Microsoft and provides the \compLang{C++}
development environment for Microsoft Windows; the version used for development is
`\asCode{Visual Studio Community 2013}', but newer versions should also work
%; note that older versions are not supported with \textbf{SpiderMonkey}
\item\exSp{} The \asCode{cmake} tool, which can be installed from the web\longDash{}page
\companyReference{http://www.cmake.org/download}{http://www.cmake.org/download}
\item\exSp{} An `\asCode{unzip}' program; the free program \asCode{Stuffit Expander}, from
\companyReference{http://my.smithmicro.com/stuffit-expander-windows.html}%
{Smith Micro Software}, can process the \textbf{ZIP} archive files
\item\exSp{} The \asCode{python} command\longDash{}line tool, from
\companyReference{https://www.python.org/downloads}{Python.org}; install a \textbf{2.7.x}
version, not a version \textbf{3} or newer, and make sure that the install directory for
the executable is added to the system \asCode{Path} variable
%\item\exSp{} The \asCode{MozillaBuild} environment, from
%\companyReference{https://ftp.mozilla.org/pub/mozilla.org/mozilla/libraries/win32/%
%MozillaBuildSetup-Latest.exe}{Mozilla};
%note that this is only needed if \textbf{SpiderMonkey} is being built
%\item\exSp{} The \asCode{git} tool, from
%\companyReference{http://git-scm.com/download/win}{git}; needed if \textbf{SpiderMonkey}
%is being built
\end{itemize}
\tertiaryEnd{}
\tertiaryStart{Prerequisites~for~Linux}
\begin{itemize}
\item\TBD{}
\end{itemize}
\tertiaryEnd{}
\secondaryEnd{}
\secondaryStart{Initial~Steps}
\begin{itemize}
\item Create a directory to hold the source code, where the build will be performed; we'll
refer to it from now on as `\asCode{devel}'
\item\exSp{} Copy the desired \textbf{ZIP} archive files from their installation location
(\asCode{/opt/M+M/src} on Macintosh OS~X, \TBD{} for Microsoft Windows and \TBD{} for
Linux) to the new directory \asCode{devel}; all but the files
\asCode{Core\fUS{}MPlusM.zip} and \asCode{Utilities\fUS{}ChannelManager.zip} are optional
\item\exSp\asCode{unzip} the \textbf{ZIP} archive files in the directory \asCode{devel}
\item\exSp{} Rename the new directories, stripping off the `\asCode{-master}' suffix, if
present
\end{itemize}
\secondaryEnd{}
\secondaryStart{(Optional)~Building~\textbf{ACE}}
\textbf{ACE} (The ADAPTIVE Communication Environment) provides the low\longDash{}level
networking support used within \mplusm{}; the files needed to compile and link with ACE
are installed as part of the normal \mplusm{} installation procedure, so it's not
necessary to rebuild ACE; the source code is provided in case there is an issue with the
headers or libraries.\\

Note that the file \asCode{ACE\fUS{}wrappers2/ace/config.h} will select the correct
configuration file for Macintosh OS~X, Microsoft Windows or Linux, so it does not need to
be modified.
\tertiaryStart{Building~on~Macintosh~OS~X}
\begin{itemize}
\item On the command\longDash{}line, move to the directory containing the \mplusm{} source
code, \asCode{devel}
\item\exSp{} Execute the following commands:
\begin{itemize}
\item\asCode{cd ACE\fUS{}wrappers2}
\item\exSp\asCode{export ACE\fUS{}ROOT=\$(pwd)}
\item\exSp\asCode{make clean \&\& make}
\end{itemize}
\item\exSp{} If the build is successful, execute the command `\asCode{sudo~sh}'
\item\exSp{} Execute the following commands within the new subshell:
\begin{itemize}
\item\asCode{export ACE\fUS{}ROOT=\$(pwd)}
\item\exSp\asCode{export DYLD\fUS{}LIBRARY\fUS{}PATH=/opt/M+M/lib:%
\$DYLD\fUS{}LIBRARY\fUS{}PATH}
\item\exSp\asCode{make install}
\item\exSp\asCode{exit}
\end{itemize}
\item\exSp{} Execute the command `\asCode{sudo ./after-install.sh}'; this removes some
unneeded files
\end{itemize}
\tertiaryEnd{}
\tertiaryStart{Building~on~Microsoft~Windows}
\begin{itemize}
\item Launch \asCode{Visual Studio}, running as Administrator
\item\exSp{} Open the project file
`\asCode{\textbf{devel}\textbackslash{}ACE\fUS{}wrappers\fUS{}vc11.sln}' with
\asCode{Visual Studio}
\item\exSp{} Within \asCode{Visual Studio}, select the \asCode{Debug} configuration and
build it via the menu item `\asCode{Build \bigRightArrow{} Build Solution}'
\item\exSp{} Select the \asCode{Release} configuration and build it via the menu item
`\asCode{Build \bigRightArrow{} Build Solution}'
\item\exSp{} Exit from \asCode{Visual Studio}
\item\exSp{} Open the \asCode{System} Control Panel
\item\exSp{} Click on the \asCode{Advanced system settings} button
\item\exSp{} Click on the \asCode{Environment Variables} button on the \asCode{Advanced}
tab
\item\exSp{} Select the \asCode{ACE\fUS{}ROOT} system variable and click on the
\asCode{Edit} button 
\item\exSp{} Edit the variable value to be
`\asCode{\textbf{devel}\textbackslash{}ACE\fUS{}wrappers2}', where \asCode{\textbf{devel}}
is the directory containing the \mplusm{} source code, and click on the \asCode{OK} button
\item\exSp{} Select the \asCode{ACE\fUS{}INCLUDE\fUS{}DIR} system variable and click on
the \asCode{Edit} button 
\item\exSp{} Edit the variable value to be
`\asCode{devel\textbackslash{}ACE\fUS{}wrappers2\textbackslash{}include}' and click on the
\asCode{OK} button
\item\exSp{} Click on the \asCode{OK} button to close the \asCode{Environment Variables}
panel
\item\exSp{} Click on the \asCode{OK} button to close the \asCode{System Properties}
window
\end{itemize}
\tertiaryEnd{}
\tertiaryStart{Building~on~Linux}
\begin{itemize}
\item\TBD{}
\end{itemize}
\tertiaryEnd{}
\secondaryEnd{}
% Note that we can't use \yarp here, since an environment isn't legal here
\secondaryStart{(Optional)~Building~\textbf{YARP}}
\textbf{\yarp} (Yet Another Robot Platform) provides the connection management support
used within \mplusm{}; the files needed to compile and link with \yarp{} are installed as
part of the normal \mplusm{} installation procedure, so it's not necessary to rebuild
\yarp{}; the source code is provided in case there is an issue with the headers or
libraries.
\tertiaryStart{Building~on~Macintosh~OS~X}
\begin{itemize}
\item On the command\longDash{}line, move to the directory containing the \mplusm{} source
code, \asCode{devel}
\item\exSp{} Execute the following commands:
\begin{itemize}
\item\asCode{cd yarp\fUS{}MPlusM}
\item\exSp\asCode{mkdir build}
\item\exSp\asCode{cd build}
\end{itemize}
\item\exSp{} Execute the command `\asCode{ccmake ..}'; this will open a graphical
interface to the makefile builder. If this is the first time that the command is executed
within a directory, the text `\asCode{EMPTY~CACHE}' will be displayed \longDash{} press
`\textbf{c}' to do the initial configuration; there may be some warnings for project
developers, which can be cleared by pressing `\textbf{e}'
\item\exSp{} Press `\textbf{t}' to show more options
\item\exSp{} Change the `\textbf{ACE\fUS{}ACE\fUS{}LIBRARY\fUS{}RELEASE}' value to
\asCode{/opt/M+M/lib/libACE.dylib}; if the option is not visible, press
`\textbf{Control-D}' to go to the next page of options and `\textbf{Control-U}' to go to
the previous page of options
\item\exSp{} Change the `\textbf{ACE\fUS{}INCLUDE\fUS{}DIR}' value to
\asCode{/opt/M+M/include}
\item\exSp{} Press `\textbf{t}' to show fewer options
\item\exSp{} Change the `\textbf{CMAKE\fUS{}INSTALL\fUS{}PREFIX}' value to
\asCode{/opt/M+M}
\item\exSp{} Change any other options that you are interested in applying; it is
recommended that the option\\
`\textbf{ENABLE\fUS{}YARPRUN\fUS{}LOG}' should be enabled and the options
`\textbf{CREATE\fUS{}YMANAGER}' and\\
`\textbf{YARP\fUS{}USE\fUS{}READLINE}' should be disabled
\item\exSp{} Press `\textbf{c}' to configure the makefiles; there may be some CMake
warnings for project developers, which can be cleared by pressing `\textbf{e}'
\item\exSp{} Press `\textbf{g}' to generate the makefiles; there may be some CMake
warnings for project developers, which can be cleared by pressing `\textbf{e}'
\item\exSp{} Execute the command `\asCode{cmake .}'; again, there will be some project
developer warnings, which can be safely ignored
\item\exSp{} Execute the command `\asCode{make clean \&\& make}'
\item\exSp{} Execute the command `\asCode{sudo ../after-build.sh}'; this corrects some
linking issues with \yarp{} caused by installing it in a non\longDash{}default location
\item\exSp{} Execute the command `\asCode{sudo make install}'
\item\exSp{} If desired, you can verify that \yarp{} was correctly built be executing the
command `\asCode{make~test}'
\end{itemize}
\tertiaryEnd{}
\tertiaryStart{Building~on~Microsoft~Windows}
\begin{itemize}
\item Launch the \asCode{CMake} GUI application
\item\exSp{} Set the source code directory to `\asCode{\textbf{devel}/yarp\fUS{}MPlusM}',
where \asCode{\textbf{devel}} is the directory containing the \mplusm{} source code
\item\exSp{} Set the build directory to `\asCode{\textbf{devel}/yarp\fUS{}MPlusM}
\item\exSp{} Select the menu item `\asCode{File \bigRightArrow{} Delete Cache}'
\item\exSp{} Click on the `\asCode{Configure}' button; make sure that the generator
setting is for \asCode{Visual Studio 12} and that `\asCode{default native compilers}' is
selected
\item\exSp{} Click on the `\asCode{Finish}' button
\item\exSp{} Turn on the `\asCode{Advanced}' option once the configuration step completes
\item\exSp{} Change the `\textbf{ACE\fUS{}ACE\fUS{}LIBRARY\fUS{}DEBUG}' value to
\asCode{\textbf{devel}/ACE\fUS{}wrappers2/lib/ACEd.lib}
\item\exSp{} Change the `\textbf{ACE\fUS{}ACE\fUS{}LIBRARY\fUS{}RELEASE}' value to
\asCode{\textbf{devel}/ACE\fUS{}wrappers2/lib/ACE.lib}
\item\exSp{} Change the `\textbf{ACE\fUS{}INCLUDE\fUS{}DIR}' value to
\asCode{\textbf{devel}/ACE\fUS{}wrappers2}
\item\exSp{} Turn off the `\asCode{Advanced}' option
\item\exSp{} Turn off the `\asCode{CREATE\fUS{}YMANAGER}' option
\item\exSp{} Click on the `\asCode{Configure}' button
\item\exSp{} Click on the `\asCode{Generate}' button
\item\exSp{} Exit from the \asCode{CMake} GUI application
\item\exSp{} Launch \asCode{Visual Studio}, running as Administrator
\item\exSp{} Open the project file
`\asCode{\textbf{devel}\textbackslash{}yarp\fUS{}MPlusM\textbackslash{}YARP.sln}' with
\asCode{Visual Studio}
\item\exSp{} Within \asCode{Visual Studio}, select the \asCode{Debug} configuration and
build it via the menu item `\asCode{Build \bigRightArrow{} Build Solution}'
\item\exSp{} Select the \asCode{Release} configuration and build it via the menu item
`\asCode{Build \bigRightArrow{} Build Solution}'
\item\exSp{} Select the \asCode{INSTALL} target and install the \asCode{Release} files via
the menu item `\asCode{Build \bigRightArrow{} Project Only \bigRightArrow{} Build Only
INSTALL}'
\item\exSp{} Exit from \asCode{Visual Studio}
\item\exSp{} Open the \asCode{System} Control Panel
\item\exSp{} Click on the \asCode{Advanced system settings} button
\item\exSp{} Click on the \asCode{Environment Variables} button on the \asCode{Advanced}
tab
\item\exSp{} Select the \asCode{YARP\fUS{}DIR} system variable and click on the
\asCode{Edit} button 
\item\exSp{} Edit the variable value to be
`\asCode{\textbf{devel}\textbackslash{}yarp\fUS{}MPlusM}', and click on the \asCode{OK}
button
\item\exSp{} Click on the \asCode{OK} button to close the \asCode{Environment Variables}
panel
\item\exSp{} Click on the \asCode{OK} button to close the \asCode{System Properties}
window
\item\exSp{} If desired, you can verify that \yarp{} was correctly built by executing the
command `\asCode{yarp~where}' in a Command Prompt window; it should either report where a
\yarp{} server is running or indicate how to start one up
\end{itemize}
\tertiaryEnd{}
\tertiaryStart{Building~on~Linux}
\begin{itemize}
\item\TBD{}
\end{itemize}
\tertiaryEnd{}
\secondaryEnd{}
\secondaryStart{(Optional, used with \textit{Channel~Manager})~Building~\textbf{OGDF}}
\textbf{OGDF} (Open Graph Drawing Framework) provides the tools to layout graphs for the
Channel~Manager GUI application; the files needed to compile and link with OGDF are
installed as part of the normal \mplusm{} installation procedure, so it's not necessary to
rebuild OGDF; the source code is provided in case there is an issue with the headers or
libraries.
\tertiaryStart{Building~on~Macintosh~OS~X}
\begin{itemize}
\item On the command\longDash{}line, move to the directory containing the \mplusm{} source
code, \asCode{devel}
\item\exSp{} Execute the following commands:
\begin{itemize}
\item\asCode{cd OGDF}
\item\exSp\asCode{make cleanrelease \&\& make release}
\item\exSp\asCode{sudo make install}
\end{itemize}
\end{itemize}
\tertiaryEnd{}
\tertiaryStart{Building~on~Microsoft~Windows}
\begin{itemize}
\item Open a Command Prompt window and move to the directory containing the \mplusm{}
source code, \asCode{devel}
\item\exSp{} Execute the command `\asCode{cd OGDF}'
\item\exSp{} Execute the command `\asCode{python makeVCXProj.py}'
\item\exSp{} Launch \asCode{Visual Studio}, running as Administrator
\item\exSp{} Open the project file
`\asCode{\textbf{devel}\textbackslash{}OGDF\textbackslash{}ogdf.sln}' with
\asCode{Visual Studio}
\item\exSp{} Within \asCode{Visual Studio}, select the \asCode{Debug} configuration and
build it via the menu item `\asCode{Build \bigRightArrow{} Build Solution}'
\item\exSp{} Select the \asCode{Release} configuration and build it via the menu item
`\asCode{Build \bigRightArrow{} Build Solution}'
\item\exSp{} Exit from \asCode{Visual Studio}
\item\exSp{} Open the \asCode{System} Control Panel
\item\exSp{} Click on the \asCode{Advanced system settings} button
\item\exSp{} Click on the \asCode{Environment Variables} button on the \asCode{Advanced}
tab
\item\exSp{} Select the \asCode{OGDF} system variable and click on the \asCode{Edit}
button 
\item\exSp{} Edit the variable value to be `\asCode{\textbf{devel}\textbackslash{}OGDF}',
and click on the \asCode{OK} button
\item\exSp{} Click on the \asCode{OK} button to close the \asCode{Environment Variables}
panel
\item\exSp{} Click on the \asCode{OK} button to close the \asCode{System Properties}
window
\end{itemize}
\tertiaryEnd{}
\tertiaryStart{Building~on~Linux}
\begin{itemize}
\item\TBD{}
\end{itemize}
\tertiaryEnd{}
\secondaryEnd{}
\secondaryStart{(Optional)~Building~\textbf{SpiderMonkey}}
\textbf{SpiderMonkey} is the \compLang{JavaScript} engine used with the JavaScript
service or \mplusm{}; the files needed to compile and link with \textbf{SpiderMonkey} are
installed as part of the normal \mplusm{} installation procedure, so it's not necessary to
rebuild \textbf{SpiderMonkey}.
The source files are not provided with the \asCode{Developer} package, but can be obtained
via the instructions on the web\longDash{}page
\companyReference{https://developer.mozilla.org/en-US/docs/Mozilla/Projects/SpiderMonkey/%
Getting\_SpiderMonkey\_source\_code}%
{\textbf{SpiderMonkey} source code}, as \mplusm{} does not use a modified version of
\textbf{SpiderMonkey} and does not depend on a particular version \longDash{} other than
it must be at least \textbf{SpiderMonkey} \textbf{31}.
\tertiaryStart{Building~on~Macintosh~OS~X}
Note that the build process for \textbf{SpiderMonkey} is currently `broken', necessitating
that manual steps be performed that should be part of the `make install' process.
\begin{itemize}
\item Select a directory to hold the \textbf{SpiderMonkey} source code, which will be
referred to as `\asCode{spidermonkey}'; this can be a sister directory to the
\asCode{devel} directory, but it need not be
\item\exSp{} On the command\longDash{}line, execute the following commands:
\begin{itemize}
\item\asCode{git clone https://github.com/mozilla/gecko-dev.git \textbf{spidermonkey}}
\item\exSp\asCode{cd \textbf{spidermonkey}}
\item\exSp\asCode{cd js/src}
\item\exSp\asCode{autoconf213}
\item\exSp\asCode{mkdir \fUS{}obj\fUS}
\item\exSp\asCode{cd \fUS{}obj\fUS}
\item\exSp\asCode{../configure {-}{-}prefix=/opt/M+M/spidermonkey {-}{-}with-system-icu
\textbackslash\\
{-}{-}enable-release {-}{-}enable-more-deterministic}
\item\exSp\asCode{make clean \&\& make}
\item\exSp\asCode{sudo make install}
\item\exSp\asCode{sudo cp dist/bin/libmozglue.dylib /opt/M+M/spidermonkey/lib}
\item\exSp\asCode{sudo install\fUS{}name\fUS{}tool -change
"@executable\fUS{}path/libmozglue.dylib" \textbackslash\\
"@rpath/libmozglue.dylib" /opt/M+M/spidermonkey/lib/libmozjs-39a1.dylib}
\end{itemize}
\item\exSp{} On the command\longDash{}line, move to the directory containing the \mplusm{}
source code, \asCode{devel}
\item\exSp{} Execute the command `\asCode{sudo Core\fUS{}MPlusM/replace-links.sh
\textbackslash\\
/opt/M+M/spidermonkey/include/mozjs-39a1}'; this replaces symbolic links in the header
directories for \textbf{SpiderMonkey} with the original items, so that it is safe to
distribute the resulting directories
\end{itemize}
\tertiaryEnd{}
\tertiaryStart{Building~on~Microsoft~Windows}
The most recent version of \textbf{SpiderMonkey} can be built on Microsoft Windows with
the `\asCode{Visual Studio Community 2013}' version of \asCode{Visual Studio} - there are
no scripts that support newer versions than this, and older versions are not supported at
all, even though the scripts exist.\\

Unfortunately, the generated header files from the build process aren't compatible with
the GUI version of \asCode{Visual Studio} and appear to either require an older or much
newer version of \asCode{Visual Studio}.\\

As a consequence, it is currently not possible to build a version of \textbf{SpiderMonkey}
that is useable as the basis for the JavaScript Input /Output service; at some time in
the future it is hoped that \textbf{SpiderMonkey} will be stable enough to permit using it
with Microsoft Windows applications other than browsers.
%\begin{itemize}
%\item Select a directory to hold the \textbf{SpiderMonkey} source code, which will be
%referred to as `\asCode{spidermonkey}'; this can be a sister directory to the
%\asCode{devel} directory, but it need not be
%\item\exSp{} Open a Command Prompt window, running as Administrator
%\item\exSp{} Execute the command
%`\asCode{git clone https://github.com/mozilla/gecko-dev.git \textbf{spidermonkey}}'
%\item\exSp{} Move to the directory where the \asCode{MozillaBuild} environment was
%installed
%\item\exSp{} Execute the command `\asCode{start-shell-msvc2013.bat}'; this will launch
%an environment in which \textbf{SpiderMonkey} can be built; note that the initial
%directory will be the `home' directory of the user, on the system drive
%\item\exSp{} If necessary, switch to the drive containing \asCode{\textbf{spidermonkey}},
%using the `\asCode{cd /\textbf{drive-letter}/}', replacing `\textbf{drive-letter}' with
%the lower-case form of the drive letter for the drive containing
%\asCode{\textbf{spidermonkey}}
%\item\exSp{} Execute the following commands:
%\begin{itemize}
%\item\asCode{cd \textbf{spidermonkey}}
%\item\exSp\asCode{cd js/src}
%\item\exSp\asCode{/usr/local/bin/autoconf-2.13}
%\item\exSp\asCode{mkdir \fUS{}obj\fUS}
%\item\exSp\asCode{cd \fUS{}obj\fUS}
%\end{itemize}
%\item\exSp{} Execute the command `\asCode{../configure {-}{-}enable-release
%{-}{-}enable-more-deterministic\\
%{-}{-}enable-build-nspr {-}{-}prefix=c:/spidermonkey}'; note that the build environment
%has problems with the standard Windows paths for program files, so the target directory is
%not the final one
%\item\exSp{} Execute the following commands:
%\begin{itemize}
%\item \asCode{mozmake}
%\item\exSp\asCode{mozmake install}
%\item\exSp\asCode{cd /c/}
%\item\exSp\asCode{cd /Program\textbackslash{} Files\textbackslash{}
%\textbackslash{}(x86\textbackslash{})}
%\item\exSp\asCode{cd M+M}
%\item\exSp\asCode{rm -rf spidermonkey}
%\item\exSp\asCode{mv /c/spidermonkey .}
%\item\exSp\asCode{exit}
%\end{itemize}
%\item\exSp{} Close the Command Prompt window
%\end{itemize}
\tertiaryEnd{}
\tertiaryStart{Building~on~Linux}
\begin{itemize}
\item\TBD{}
\end{itemize}
\tertiaryEnd{}
\secondaryEnd{}
\secondaryStart{Building~Core~\mplusm}
\tertiaryStart{Building~on~Macintosh~OS~X}
\begin{itemize}
\item On the command\longDash{}line, move to the directory containing the \mplusm{} source
code, \asCode{devel}
\item\exSp{} Execute the command `\asCode{cd Core\fUS{}MPlusM}'
\item\exSp{} Execute the command `\asCode{ccmake .}'; this will open a graphical interface
to the makefile builder. If this is the first time that the command is executed within a
directory, the text `\asCode{EMPTY~CACHE}' will be displayed \longDash{} press
`\textbf{c}' to do the initial configuration
\item\exSp{} Change the `\textbf{CMAKE\fUS{}BUILD\fUS{}TYPE}' to \asCode{Release}
\item\exSp{} Change any other options that you are interested in applying; the default
options minimize the amount of text that is output when \mplusm{} command\longDash{}line
tools are executed
\item\exSp{} Press `\textbf{c}' to configure the makefiles
\item\exSp{} Press `\textbf{g}' to generate the makefiles
\item\exSp{} Execute the command `\asCode{cmake .}'
\item\exSp{} Execute the command `\asCode{make clean \&\& make}'
\item\exSp{} To run the unit tests for \mplusm{}, do the following:
\begin{itemize}
\item Execute the command `\asCode{ps | grep yarp | grep -v grep}'; if there is a line
similar to `\asCode{30339 ttys004 0:00.01 yarp server\textellipsis}' then the \yarp{}
server is already running
\item\exSp{} If the \yarp{} server is not already running, start a separate terminal
session and launch the \yarp{} server by executing the command `\asCode{yarp~server}'
\item\exSp{} If you see something similar to the following, there is another process using
the network port that \yarp{} uses by default:
\outputBegin{}
\begin{verbatim}
__   __ _    ____  ____  
\ \ / // \  |  _ \|  _ \ 
 \ V // _ \ | |_) | |_) |
  | |/ ___ \|  _ <|  __/ 
  |_/_/   \_\_| \_\_|    

Call with --help for information on available options
Options can be set on command line or in /Users/M_M/Library/Application
       Support/yarp/config/yarpserver.conf
Using port database: :memory:
Using subscription database: :memory:
IP address: default
Port number: 10000
yarp: Port /root failed to activate at tcp://10.0.1.2:10000 (address conflict)
Name server failed to open
\end{verbatim}
\outputEnd{}
\item\exSp{} If you see the above error message, you will need to clear the \yarp{}
configuration by issuing the command `\asCode{yarp~conf~{-}{-}clean}'.
\item\exSp{} Once the \yarp{} configuration is cleared, execute the command
`\asCode{yarp server \longDash{}socket 11223 \longDash{}write}' to start the \yarp{}
server, where `\asCode{11223}' is an arbitrary number greater than 1024.
\item\exSp{} In the terminal session where \mplusm{} was built, execute the command
`\asCode{make~test}'
\item\exSp{} When the test completes, close the new terminal session if one was started
for the test
\end{itemize}
\item\exSp{} To install the freshly\longDash{}built \mplusm{} files, execute the command
`\asCode{sudo~make~install}'
\item\exSp{} To confirm the normal operation of \mplusm{}, do the following:
\begin{itemize}
\item Check that the \yarp{} server is running and start it if it is not, using the
instructions above
\item\exSp{} Execute the command `\asCode{mpmRegistryService \&}'; this will launch the
Registry Service in the background and return the \textbf{PID} that can be used to halt it
later
\item\exSp{} Execute the command `\asCode{mpmServiceLister}; this should display the
properties of the Registry Service
\item\exSp{} If you wish to halt the Registry Service, execute the command
`\asCode{halt -s HUP}
\#\#\#\#', where ``\#\#\#\#'' is the \textbf{PID} that was returned when the Registry
Service was launched
\end{itemize}
\end{itemize}
\tertiaryEnd{}
\tertiaryStart{Building~on~Microsoft~Windows}
\begin{itemize}
\item Launch the \asCode{CMake} GUI application
\item\exSp{} Set the source code directory to `\asCode{\textbf{devel}/Core\fUS{}MPlusM}',
where \asCode{\textbf{devel}} is the directory containing the \mplusm{} source code
\item\exSp{} Set the build directory to `\asCode{\textbf{devel}/Core\fUS{}MPlusM}
\item\exSp{} Select the menu item `\asCode{File \bigRightArrow{} Delete Cache}'
\item\exSp{} Click on the `\asCode{Configure}' button; make sure that the generator
setting is for \asCode{Visual Studio 12} and that `\asCode{default native compilers}' is
selected
\item\exSp{} Click on the `\asCode{Finish}' button
\item\exSp{} Click on the `\asCode{Configure}' button once the configuration step
completes
\item\exSp{} Click on the `\asCode{Generate}' button
\item\exSp{} Exit from the \asCode{CMake} GUI application
\item\exSp{} Launch \asCode{Visual Studio}, running as Administrator
\item\exSp{} Open the project file
`\asCode{\textbf{devel}\textbackslash{}Core\fUS{}MPlusM\textbackslash{}M+M.sln}' with
\asCode{Visual Studio}
\item\exSp{} Within \asCode{Visual Studio}, select the \asCode{Debug} configuration and
build it via the menu item `\asCode{Build \bigRightArrow{} Build Solution}'
\item\exSp{} Select the \asCode{Release} configuration and build it via the menu item
`\asCode{Build \bigRightArrow{} Build Solution}'
\item\exSp{} Select the \asCode{INSTALL} target and install the \asCode{Release} files via
the menu item `\asCode{Build \bigRightArrow{} Project Only \bigRightArrow{} Build Only
INSTALL}'; note that this will fail the first time, since it attempts to install
\textit{Channel~Manager}, which has not been built yet
\item\exSp{} Exit from \asCode{Visual Studio}
\end{itemize}
\tertiaryEnd{}
\tertiaryStart{Building~on~Linux}
\begin{itemize}
\item\TBD{}
\end{itemize}
\tertiaryEnd{}
\secondaryEnd{}
\secondaryStart{Building~\textit{Channel~Manager}}
\textit{Channel~Manager} is not built from the command\longDash{}line but, rather, from
the IDE.
\tertiaryStart{Building~on~Macintosh~OS~X}
\begin{itemize}
\item In Finder, open the directory containing the \mplusm{} source code, \asCode{devel}
\item\exSp{} Open the directory `\asCode{Utilities\fUS{}ChannelManager}' within
\asCode{devel}
\item\exSp{} Open the directory `\asCode{Builds/MacOSX}'
\item\exSp{} Open the file `\asCode{Channel Manager.xcodeproj}' with \asCode{Xcode}
\item\exSp{} Within \asCode{Xcode}, select either the `\asCode{Channel Manager Debug}' or
`\asCode{Channel Manager Release}' Scheme
\item\exSp{} Perform the menu item `\asCode{Product \bigRightArrow{} Build}' or
`\asCode{Product \bigRightArrow{} Run}'
\item\exSp{} To create an executable that can be placed in the `\asCode{/Applications}'
folder, do an `\asCode{Archive \bigRightArrow{} Export \bigRightArrow{} Export as a Mac
Application}'
and place the generated application in a writable location, like your home directory
\item\exSp{} Exit from \asCode{Xcode}
\item\exSp{} If the generated application is named \asCode{Channel Manager Debug}, rename
it to \asCode{Channel Manager} and, if it is named \asCode{Channel Manager Release},
rename it to \asCode{Channel Manager}
\item\exSp{} Copy the \asCode{Channel Manager} application to the \asCode{/Applications}
directory
\end{itemize}
\tertiaryEnd{}
\tertiaryStart{Building~on~Microsoft~Windows}
\begin{itemize}
\item Launch \asCode{Visual Studio}, running as Administrator
\item\exSp{} Open the project file
`\asCode{\textbf{devel}\textbackslash{}Utilities\fUS{}ChannelManager\textbackslash{}%
Builds\textbackslash{}VisualStudio2013\textbackslash{}Channel Manager.sln}' with
\asCode{Visual Studio}
\item\exSp{} Within \asCode{Visual Studio}, select the \asCode{Debug} configuration and
build it via the menu item `\asCode{Build \bigRightArrow{} Build Solution}'
\item\exSp{} Select the \asCode{Release} configuration and build it via the menu item
`\asCode{Build \bigRightArrow{} Build Solution}'
\end{itemize}
\tertiaryEnd{}
\tertiaryStart{Building~on~Linux}
\begin{itemize}
\item\TBD{}
\end{itemize}
\tertiaryEnd{}
\secondaryEnd{}
\secondaryStart{Creating~the~Distribution~Packages}
The distribution packages are standalone files that can be used to create a complete
\mplusm{} installation.
\tertiaryStart{Creating~on~Macintosh~OS~X}
\begin{itemize}
\item If any source files have been modified in the `\asCode{Core\fUS{}MPlusM}' or
`\asCode{Utilities\fUS{}ChannelManager}' directories, commit the changes to the
\asCode{git} repositories
\item\exSp{} Download the latest versions of the \asCode{git} repositories as \asCode{ZIP}
archive files, to make sure that the generated distribution package is consistent
\item\exSp{} Copy the downloaded \asCode{ZIP} archive files to the directory containing
the \mplusm{} source code, \asCode{devel}; the archives\\
\asCode{ACE\fUS{}wrappers.zip}, \asCode{Core\fUS{}MPlusM-master.zip},
\asCode{JUCE.zip}, \asCode{OGDF.zip},\\
\asCode{Utilities\fUS{}ChannelManager-master.zip} and \asCode{yarp\fUS{}MPlusM.zip} must
all be present in the \asCode{devel} directory in order to construct the distribution
packages successfully
\item\exSp{} Launch the \asCode{Packages} GUI tool
\item\exSp{} Open the \asCode{Developer} file, which is located in the
\asCode{Core\fUS{}MPlusM/Packages/Developer} directory within the \asCode{devel} directory
\item\exSp{} Perform the menu item \asCode{Build \bigRightArrow{} Clean\textellipsis}
\item\exSp{} Perform the menu item \asCode{Build \bigRightArrow{} Build}
\item\exSp{} Open the \asCode{M+M} file, which is located in the \asCode{Packages}
directory
\item\exSp{} Perform the menu item \asCode{Build \bigRightArrow{} Clean\textellipsis}
\item\exSp{} Perform the menu item \asCode{Build \bigRightArrow{} Build}
\item\exSp{} The distribution package is the \asCode{M+M.pkg} file located in the
\asCode{Core\fUS{}MPlusM/Packages/build} directory
\end{itemize}
\tertiaryEnd{}
\tertiaryStart{Creating~on~Microsoft~Windows}
\begin{itemize}
\item\TBD{}
\end{itemize}
\tertiaryEnd{}
\tertiaryStart{Creating~on~Linux}
\begin{itemize}
\item\TBD{}
\end{itemize}
\tertiaryEnd{}
\secondaryEnd{}
\appendixEnd{}
